/**
 * Moon Web v1.0.0-beta.7
 * Copyright 2016-2020 Kabir Shah
 * Released under the MIT License
 * https://moonjs.org
 */
!function(e,t){"undefined"==typeof module?e.Moon=t():module.exports=t()}(this,(function(){"use strict";function e(e,t){this.name=e,this.data=t}var t=null,n=null;function r(e){t=e}function a(e){n=e}var o=["a","abbr","acronym","address","applet","area","article","aside","audio","b","base","basefont","bdi","bdo","bgsound","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","command","content","data","datalist","dd","del","details","dfn","dialog","dir","div","dl","dt","element","em","embed","fieldset","figcaption","figure","font","footer","form","frame","frameset","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","iframe","image","img","input","ins","isindex","kbd","keygen","label","legend","li","link","listing","main","map","mark","marquee","math","menu","menuitem","meta","meter","multicol","nav","nextid","nobr","noembed","noframes","noscript","object","ol","optgroup","option","output","p","param","picture","plaintext","pre","progress","q","rb","rbc","rp","rt","rtc","ruby","s","samp","script","section","select","shadow","slot","small","source","spacer","span","strike","strong","style","sub","summary","sup","svg","table","tbody","td","template","text","textarea","tfoot","th","thead","time","title","tr","track","tt","u","ul","var","video","wbr","xmp"];function i(e){console.error("[Moon] ERROR: "+e)}for(var u={node:function(t){return function(n){return new e(t,n)}}},s=function(){var t=o[l];u[t]=function(n){return new e(t,n)}},l=0;l<o.length;l++)s();var c={components:u,mount:function(t){a(t);for(var o=n.attributes,i={},u=0;u<o.length;u++){var s=o[u];i[s.name]=s.value}r(new e(n.tagName.toLowerCase(),i))}};var f={router:function(e){for(var t=e.route,n="/",r=e.routes,a=1;a<t.length;a++){var o=t[a];"/"===o?(r=(n in r?r[n]:r["/*"])[1],n="/"):n+=o}return(n in r?r[n]:r["/*"])[0](e)}},d={};function v(e){var t=e.name;if("text"===t)return document.createTextNode(e.data.data);var n=document.createElement(t);n.MoonChildren=n.MoonChildren||[];var r=e.data;for(var a in r){var o=r[a];if("o"===a[0]&&"n"===a[1])n[a.toLowerCase()]=o;else switch(a){case"attributes":for(var i in o)n.setAttribute(i,o[i]);break;case"style":var u=n.style;for(var s in o)u[s]=o[s];break;case"innerHTML":n.innerHTML=o;break;case"focus":o&&n.focus();break;case"class":n.className=o;break;case"for":n.htmlFor=o;break;case"children":for(var l=n.MoonChildren=[],c=0;c<o.length;c++){var f=v(o[c]);l.push(f),n.appendChild(f)}break;default:n[a]=o}}return n}Node.prototype.MoonChildren=null;var p={set:function(e){if(t.name===e.name)!function e(t,n,r){var a=t.data,o=r.data;for(var i in o){var u=a[i],s=o[i];if(u!==s)if("o"===i[0]&&"n"===i[1])n[i.toLowerCase()]=s;else switch(i){case"attributes":if(void 0===u)for(var l in s)n.setAttribute(l,s[l]);else{for(var c in s){var f=s[c];u[c]!==f&&n.setAttribute(c,f)}for(var p in u)p in s||n.removeAttribute(p)}break;case"style":var h=n.style;if(void 0===u)for(var m in s)h[m]=s[m];else{for(var b in s){var g=s[b];u[b]!==g&&(h[b]=g)}for(var x in u)x in s||(h[x]="")}break;case"focus":s?n.focus():n.blur();break;case"class":n.className=s;break;case"for":n.htmlFor=s;break;case"children":for(var y=n.MoonChildren||[],w=s.length,C=[],k=!0,T=0;T<w;T++){var M=s[T].data&&s[T].data.key;if(void 0===M){k=!1;break}C.push(M)}if(void 0===u){for(var E=0;E<w;E++){var O=v(s[E]);y.push(O),n.appendChild(O)}n.MoonChildren=y}else if(k){for(var j={},A=0;A<u.length;A++){var D=u[A].data&&u[A].data.key;void 0!==D&&(j[D]={node:u[A],el:y[A],used:!1})}for(var L=[],N=0;N<w;N++){var H=s[N],P=j[C[N]];if(P)e(P.node,P.el,H),P.used=!0,L.push(P.el);else{var q=v(H);L.push(q),n.appendChild(q)}}for(var R in j)j[R].used||n.removeChild(j[R].el);n.MoonChildren=L}else{var S=u.length;if(S===w)for(var F=0;F<S;F++){var $=u[F],G=s[F];if($!==G)if($.name===G.name)e($,y[F],G);else{var W=v(G);n.replaceChild(W,y[F]),y[F]=W}}else if(S>w){for(var X=0;X<w;X++){var I=u[X],J=s[X];if(I!==J)if(I.name===J.name)e(I,y[X],J);else{var K=v(J);n.replaceChild(K,y[X]),y[X]=K}}for(var z=w;z<S;z++)n.removeChild(y.pop())}else{for(var B=0;B<S;B++){var Q=u[B],U=s[B];if(Q!==U)if(Q.name===U.name)e(Q,y[B],U);else{var V=v(U);n.replaceChild(V,y[B]),y[B]=V}}for(var Y=S;Y<w;Y++){var Z=v(s[Y]);y.push(Z),n.appendChild(Z)}}}break;default:n[i]=s}}for(var _ in a)if(!(_ in o))if("o"===_[0]&&"n"===_[1])n[_.toLowerCase()]=null;else switch(_){case"attributes":var ee=a.attributes;for(var te in ee)n.removeAttribute(te);break;case"focus":n.blur();break;case"class":n.className="";break;case"for":n.htmlFor="";break;case"children":for(var ne=a.children.length,re=n.MoonChildren||[],ae=0;ae<ne;ae++)n.removeChild(re.pop());break;default:var oe=t.name;n[_]=(oe in d?d[oe]:d[oe]="text"===oe?document.createTextNode(""):document.createElement(oe))[_]}}(t,n,e);else{var o=v(e);n.parentNode.replaceChild(o,n),a(o)}r(e)}},h={get:function(){return Date.now()},set:function(e){setTimeout(e[1],1e3*e[0])}},m={get:function(){return localStorage},set:function(e){for(var t in e){var n=e[t];localStorage[t]!==n&&(localStorage[t]=n)}for(var r in localStorage)r in e||delete localStorage[r]}},b=/^([^:]+):\s*([^]*?)\s*$/gm,g={set:function(e){var t=new XMLHttpRequest;if(t.responseType="responseType"in e?e.responseType:"text","onLoad"in e&&(t.onload=function(){for(var n,r={},a=t.getAllResponseHeaders();null!==(n=b.exec(a));)r[n[1]]=n[2];e.onLoad({status:t.status,headers:r,body:t.response})}),"onError"in e&&(t.onerror=e.onError),t.open("method"in e?e.method:"GET",e.url),"headers"in e){var n=e.headers;for(var r in n)t.setRequestHeader(r,n[r])}t.send("body"in e?e.body:null)}},x={get:function(){return location.pathname},set:function(e){history.pushState(null,"",e)}},y={data:{}};Object.defineProperty(y,"view",p),Object.defineProperty(y,"time",h),Object.defineProperty(y,"storage",m),Object.defineProperty(y,"http",g),Object.defineProperty(y,"route",x);var w={m:y,route:f,version:"1.0.0-beta.7",view:c},C=/[$\w.]/;function k(e,t){this.expected=e,this.index=t}var T=function(e,t){return function(n,r){var a=t(n,r);return a instanceof k?a:[{type:e,value:a[0]},a[1]]}},M=function(e,t){return t===e.length?["EOF",t]:new k("EOF",t)},E=function(e,t){return t<e.length?[e[t],t+1]:new k("any",t)},O=function(e){return function(t,n){var r=t[n];return r===e?[r,n+1]:new k('"'+e+'"',n)}},j=function(e){return function(t,n){var r=t[n];return void 0!==r&&e.test(r)?[r,n+1]:new k(e.toString(),n)}},A=function(e){return function(t,n){var r=n+e.length;return t.slice(n,r)===e?[e,r]:new k('"'+e+'"',n)}},D=function(e){return function(t,n){if(n<t.length){for(var r=0;r<e.length;r++){var a=e[r];if(t.slice(n,n+a.length)===a)return new k('not "'+a+'"',n)}return[t[n],n+1]}return new k("not "+e.map(JSON.stringify).join(", "),n)}},L=function(e,t){return function(n,r){var a=e(n,r);return a instanceof k&&a.index===r?t(n,r):a}},N=function(e,t){return function(n,r){var a=e(n,r);if(a instanceof k)return a;var o=t(n,a[1]);return o instanceof k?o:[[a[0],o[0]],o[1]]}},H=function(e){return function(t,n){for(var r=[],a=0;a<e.length;a++){var o=e[a](t,n);if(o instanceof k)return o;r.push(o[0]),n=o[1]}return[r,n]}},P=function(e){return function(t,n){for(var r=new k("alternates",-1),a=0;a<e.length;a++){var o=e[a](t,n);if(!(o instanceof k&&o.index===n))return o;o.index>r.index&&(r=o)}return r}},q=function(e){return function(t,n){for(var r,a=[];!((r=e(t,n))instanceof k);)a.push(r[0]),n=r[1];return r.index===n?[a,n]:r}},R=function(e){return function(t,n){var r=[],a=e(t,n);if(a instanceof k)return a;for(r.push(a[0]),n=a[1];!((a=e(t,n))instanceof k);)r.push(a[0]),n=a[1];return a.index===n?[r,n]:a}},S=function(e){return function(t,n){var r=e(t,n);return r instanceof k&&(r.index=n),r}},F=function(e){return function(t,n){var r=e(t,n);return r instanceof k&&r.index===n?[null,n]:r}},$={comment:T("comment",H([O("#"),q(L(N(O("\\"),E),D(["#"]))),O("#")])),separator:function(e,t){return q(L(P([O(" "),O("\t"),O("\n")]),$.comment))(e,t)},value:function(e,t){return P([R(j(C)),H([O('"'),q(L(N(O("\\"),E),D(['"']))),O('"')]),H([O("'"),q(L(N(O("\\"),E),D(["'"]))),O("'")]),H([O("`"),q(L(N(O("\\"),E),D(["`"]))),O("`")]),H([O("("),$.expression,O(")")]),H([O("["),$.expression,O("]")]),H([O("{"),$.expression,O("}")])])(e,t)},attributes:function(e,t){return T("attributes",q(H([$.value,F(H([O("="),$.value])),$.separator])))(e,t)},text:T("text",R(L(N(O("\\"),E),D(["{","<"])))),interpolation:function(e,t){return T("interpolation",H([O("{"),$.expression,O("}")]))(e,t)},node:function(e,t){return T("node",H([O("<"),$.separator,$.value,$.separator,A("*>")]))(e,t)},nodeData:function(e,t){return T("nodeData",H([O("<"),$.separator,$.value,$.separator,L(S($.attributes),$.value),A("/>")]))(e,t)},nodeDataChildren:function(e,t){return T("nodeDataChildren",H([O("<"),$.separator,$.value,$.separator,$.attributes,O(">"),q(P([S($.node),S($.nodeData),S($.nodeDataChildren),$.text,$.interpolation])),A("</"),q(D([">"])),O(">")]))(e,t)},expression:function(e,t){return q(P([H([A("//"),q(D(["\n"]))]),H([A("/*"),q(D(["*/"])),A("*/")]),S(H([O("/"),R(L(N(O("\\"),D(["\n"])),D(["/","\n"]))),O("/")])),$.comment,$.value,S($.node),S($.nodeData),S($.nodeDataChildren),O("/"),O("<"),R(D(["/","#",'"',"'","`","(",")","[","]","{","}","<"]))]))(e,t)},main:function(e,t){return N($.expression,M)(e,t)}};var G=/^\s+$/,W=/(^|[^\\])("|\n)/g;function X(e){return Array.isArray(e)&&3===e.length&&"{"===e[0]&&"}"===e[2]?e[1]:e}function I(e){var t=J(e);return-1===o.indexOf(t)?t:"Moon.view.components."+t}function J(e){var t,n=e.type;if("string"==typeof e)return e;if(Array.isArray(e)){for(var r="",a=0;a<e.length;a++)r+=J(e[a]);return r}if("comment"===n)return"/*"+J(e.value[1])+"*/";if("attributes"===n){for(var o=e.value,i=[],u=[],s=0;s<o.length;s++){var l=o[s],c=J(X(l[0])),f="className"===(t=c)?"class":"htmlFor"===t?"for":t,d=l[1];if("..."===f.slice(0,3)){var v=f.slice(3)||J(X(d&&d[1]||[]));i.push(v)}else{var p=null===d?"true":J(X(d[1]));u.push('"'+f+'":'+p)}}if(0===i.length)return{output:u.join(","),separator:0===u.length?"":",",isExpression:!1};var h=0===u.length?"{}":"{"+u.join(",")+"}";return{output:"Object.assign({}, "+i.join(",")+(u.length?", "+h:"")+")",separator:u.length||i.length?",":"",isExpression:!0}}if("text"===n){var m=J(e.value),b=G.test(m)&&-1!==m.indexOf("\n");return{output:b?m:'Moon.view.components.text({data:"'+m.replace(W,(function(e,t,n){return t+('"'===n?'\\"':"\\n\\\n")}))+'"})',isWhitespace:b}}if("interpolation"===n)return"Moon.view.components.text({data:"+J(e.value[1])+"})";if("node"===n){var g=e.value;return J(g[1])+I(g[2])+J(g[3])}if("nodeData"===n){var x=e.value,y=x[4],w=J(y);return""+J(x[1])+I(x[2])+J(x[3])+"("+("attributes"===y.type?w.isExpression?w.output:"{"+w.output+"}":w)+")"}if("nodeDataChildren"===n){var C,k=e.value,T=J(k[4]),M=k[6],E=M.length;if(0===E)C="";else{var O="";C=T.separator+"children:[";for(var j=0;j<E;j++){var A=M[j],D=J(A);"text"===A.type?D.isWhitespace?C+=D.output:(C+=O+D.output,O=","):(C+=O+D,O=",")}C+="]"}return""+J(k[1])+I(k[2])+J(k[3])+"({"+T.output+C+"})"}}function K(e){var t=function(e){return $.main(e,0)}(e);return J(t[0][0])}var z=[];return document.addEventListener("DOMContentLoaded",(function(){for(var e=document.querySelectorAll("script"),t=0;t<e.length;t++){var n=e[t];"text/moon"===n.type&&z.push(n)}!function e(){if(0!==z.length){var t=z.shift(),n=t.src;if(0===n.length){var r=document.createElement("script");r.type="text/javascript",r.text=K(t.text),t.parentNode.replaceChild(r,t),e()}else{var a=new XMLHttpRequest;a.responseType="text",a.onload=function(){if(0===a.status||200===a.status){var r=document.createElement("script");r.type="text/javascript",r.text=K(a.response),t.parentNode.replaceChild(r,t)}else i("Invalid script HTTP response.\n\nAttempted to download script:\n\t"+n+"\n\nReceived error HTTP status code:\n\t"+a.status+"\n\nExpected OK HTTP status code 0 or 200.");e()},a.onerror=function(){i("Failed script HTTP request.\n\nAttempted to download script:\n\t"+n+"\n\nReceived error.\n\nExpected successful HTTP request."),e()},a.open("GET",n,!0),a.send(null)}}}()})),w}));