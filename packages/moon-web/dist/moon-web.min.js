/**
 * Moon Web v1.0.0-beta.7
 * Copyright 2016-2020 Kabir Shah
 * Released under the MIT License
 * https://moonjs.org
 */
!function(e,r){"undefined"==typeof module?e.Moon=r():module.exports=r()}(this,(function(){"use strict";function e(e,r){this.name=e,this.data=r}var r=null,n=null;function t(e){r=e}function a(e){n=e}var o=["a","abbr","acronym","address","applet","area","article","aside","audio","b","base","basefont","bdi","bdo","bgsound","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","command","content","data","datalist","dd","del","details","dfn","dialog","dir","div","dl","dt","element","em","embed","fieldset","figcaption","figure","font","footer","form","frame","frameset","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","iframe","image","img","input","ins","isindex","kbd","keygen","label","legend","li","link","listing","main","map","mark","marquee","math","menu","menuitem","meta","meter","multicol","nav","nextid","nobr","noembed","noframes","noscript","object","ol","optgroup","option","output","p","param","picture","plaintext","pre","progress","q","rb","rbc","rp","rt","rtc","ruby","s","samp","script","section","select","shadow","slot","small","source","spacer","span","strike","strong","style","sub","summary","sup","svg","table","tbody","td","template","text","textarea","tfoot","th","thead","time","title","tr","track","tt","u","ul","var","video","wbr","xmp"];function i(e){console.error("[Moon] ERROR: "+e)}function u(e,r){for(var n=r-e.length,t=0;t<n;t++)e=" "+e;return e}for(var s={node:function(r){return function(n){return new e(r,n)}}},l=function(){var r=o[f];s[r]=function(n){return new e(r,n)}},f=0;f<o.length;f++)l();var c={};Object.create(null);function d(e,r){e&&("function"==typeof e?e(r):"object"==typeof e&&(e.current=r))}function v(e){if(!e||"object"!=typeof e)return e;for(var r=Object.keys(e),n=0;n<r.length;n++){var t=r[n];if(null!=t&&-1!==t.indexOf("-")){for(var a=t.split("-"),o=a[0],i=1;i<a.length;i++){var u=a[i];u.length>0&&(o+=u[0].toUpperCase()+u.slice(1))}o in e||(e[o]=e[t]),delete e[t]}}return e}function p(e){switch(e){case"onChange":return"oninput";case"onDoubleClick":return"ondblclick";case"onFocus":return"onfocus";case"onBlur":return"onblur";case"onSubmit":return"onsubmit";case"onMouseEnter":return"onmouseenter";case"onMouseLeave":return"onmouseleave";case"onMouseOver":return"onmouseover";case"onMouseOut":return"onmouseout";case"onKeyDown":return"onkeydown";case"onKeyUp":return"onkeyup";case"onKeyPress":return"onkeypress";case"onInput":return"oninput";default:return e.toLowerCase()}}function h(e){var r=e.name;if("text"===r)return document.createTextNode(e.data.data);var n=document.createElement(r);n.MoonChildren=n.MoonChildren||[];var t=e.data;for(var a in t){var o=t[a];if("o"===a[0]&&"n"===a[1])n[p(a)]=o;else switch(a){case"attributes":for(var i in o)n.setAttribute(i,o[i]);break;case"style":var u=n.style;for(var s in v(o),o)u[s]=o[s];break;case"innerHTML":n.innerHTML=o;break;case"focus":o&&n.focus();break;case"class":n.className=o;break;case"for":n.htmlFor=o;break;case"ref":d(o,n);break;case"children":for(var l=n.MoonChildren=[],f=0;f<o.length;f++){var c=h(o[f]);l.push(c),n.appendChild(c)}break;default:n[a]=o}}return n}Node.prototype.MoonChildren=null;var m={set:function(e){if(r.name===e.name)!function e(r,n,t){var a=r.data,o=t.data;for(var i in o){var u=a[i],s=o[i];if(u!==s)if("o"===i[0]&&"n"===i[1])n[p(i)]=s;else switch(i){case"attributes":if(void 0===u)for(var l in s)n.setAttribute(l,s[l]);else{for(var f in s){var m=s[f];u[f]!==m&&n.setAttribute(f,m)}for(var g in u)g in s||n.removeAttribute(g)}break;case"style":var b=n.style;if(v(s),u&&v(u),void 0===u)for(var y in s)b[y]=s[y];else{for(var x in s){var C=s[x];u[x]!==C&&(b[x]=C)}for(var k in u)k in s||(b[k]="")}break;case"focus":s?n.focus():n.blur();break;case"class":n.className=s;break;case"for":n.htmlFor=s;break;case"children":for(var w=n.MoonChildren||[],M=s.length,A=[],O=!0,T=Object.create(null),E=0;E<M;E++){var j=s[E].data&&s[E].data.key;void 0===j?O=!1:(!0,T[j]?!0:T[j]=!0),A.push(j)}if(void 0===u){for(var D=0;D<M;D++){var L=h(s[D]);w.push(L),n.appendChild(L)}n.MoonChildren=w}else if(O){for(var P={},H=0;H<u.length;H++){var S=u[H].data&&u[H].data.key;void 0!==S&&(P[S]={node:u[H],el:w[H],used:!1})}for(var N=[],q=0;q<M;q++){var R=s[q],F=P[A[q]];if(F)e(F.node,F.el,R),F.used=!0,N.push(F.el);else{var I=h(R);N.push(I),n.appendChild(I)}}for(var K in P)P[K].used||n.removeChild(P[K].el);n.MoonChildren=N}else{var $=u.length;if($===M)for(var z=0;z<$;z++){var G=u[z],U=s[z];if(G!==U)if(G.name===U.name)e(G,w[z],U);else{var W=h(U);n.replaceChild(W,w[z]),w[z]=W}}else if($>M){for(var X=0;X<M;X++){var B=u[X],J=s[X];if(B!==J)if(B.name===J.name)e(B,w[X],J);else{var Q=h(J);n.replaceChild(Q,w[X]),w[X]=Q}}for(var V=M;V<$;V++)n.removeChild(w.pop())}else{for(var Y=0;Y<$;Y++){var Z=u[Y],_=s[Y];if(Z!==_)if(Z.name===_.name)e(Z,w[Y],_);else{var ee=h(_);n.replaceChild(ee,w[Y]),w[Y]=ee}}for(var re=$;re<M;re++){var ne=h(s[re]);w.push(ne),n.appendChild(ne)}}}break;default:n[i]=s}}for(var te in a)if(!(te in o))if("o"===te[0]&&"n"===te[1])n[te.toLowerCase()]=null;else switch(te){case"attributes":var ae=a.attributes;for(var oe in ae)n.removeAttribute(oe);break;case"focus":n.blur();break;case"class":n.className="";break;case"for":n.htmlFor="";break;case"children":for(var ie=a.children.length,ue=n.MoonChildren||[],se=0;se<ie;se++)n.removeChild(ue.pop());break;case"ref":d(a.ref,null);break;default:var le=r.name;n[te]=(le in c?c[le]:c[le]="text"===le?document.createTextNode(""):document.createElement(le))[te]}}(r,n,e);else{var o=h(e);n.parentNode.replaceChild(o,n),a(o)}t(e)}},g={components:s,mount:function(r){a(r);for(var o=n.attributes,i={},u=0;u<o.length;u++){var s=o[u];i[s.name]=s.value}t(new e(n.tagName.toLowerCase(),i))},normalizeChildren:function e(r){if(null==r||"boolean"==typeof r)return[];if(Array.isArray(r)){for(var n=[],t=0;t<r.length;t++)for(var a=e(r[t]),o=0;o<a.length;o++)n.push(a[o]);return n}var i=typeof r;return"string"===i||"number"===i||"bigint"===i?[s.text({data:String(r)})]:r&&void 0!==r.name?[r]:[s.text({data:String(r)})]},cls:function e(){for(var r="",n=0;n<arguments.length;n++){var t=arguments[n];if(t){var a=typeof t;if("string"===a||"number"===a)r+=(r?" ":"")+t;else if(Array.isArray(t)){var o=e.apply(null,t);o&&(r+=(r?" ":"")+o)}else if("object"===a)for(var i in t)t[i]&&(r+=(r?" ":"")+i)}}return r}};var b={router:function(e){for(var r=e.route,n="/",t=e.routes,a=1;a<r.length;a++){var o=r[a];"/"===o?(t=(n in t?t[n]:t["/*"])[1],n="/"):n+=o}return(n in t?t[n]:t["/*"])[0](e)}},y={get:function(){return Date.now()},set:function(e){setTimeout(e[1],1e3*e[0])}},x={get:function(){return localStorage},set:function(e){for(var r in e){var n=e[r];localStorage[r]!==n&&(localStorage[r]=n)}for(var t in localStorage)t in e||delete localStorage[t]}},C=/^([^:]+):\s*([^]*?)\s*$/gm,k={set:function(e){var r=new XMLHttpRequest;if(r.responseType="responseType"in e?e.responseType:"text","onLoad"in e&&(r.onload=function(){for(var n,t={},a=r.getAllResponseHeaders();null!==(n=C.exec(a));)t[n[1]]=n[2];e.onLoad({status:r.status,headers:t,body:r.response})}),"onError"in e&&(r.onerror=e.onError),r.open("method"in e?e.method:"GET",e.url),"headers"in e){var n=e.headers;for(var t in n)r.setRequestHeader(t,n[t])}r.send("body"in e?e.body:null)}},w={get:function(){return location.pathname},set:function(e){history.pushState(null,"",e)}},M={data:{}};Object.defineProperty(M,"view",m),Object.defineProperty(M,"time",y),Object.defineProperty(M,"storage",x),Object.defineProperty(M,"http",k),Object.defineProperty(M,"route",w);var A={m:M,route:b,version:"1.0.0-beta.7",view:g},O=/[-$\w.]/;function T(e,r){this.expected=e,this.index=r}var E=function(e,r){return function(n,t){var a=r(n,t);return a instanceof T?a:[{type:e,value:a[0]},a[1]]}},j=function(e,r){return r===e.length?["EOF",r]:new T("EOF",r)},D=function(e,r){return r<e.length?[e[r],r+1]:new T("any",r)},L=function(e){return function(r,n){var t=r[n];return t===e?[t,n+1]:new T('"'+e+'"',n)}},P=function(e){return function(r,n){var t=r[n];return void 0!==t&&e.test(t)?[t,n+1]:new T(e.toString(),n)}},H=function(e){return function(r,n){var t=n+e.length;return r.slice(n,t)===e?[e,t]:new T('"'+e+'"',n)}},S=function(e){return function(r,n){if(n<r.length){for(var t=0;t<e.length;t++){var a=e[t];if(r.slice(n,n+a.length)===a)return new T('not "'+a+'"',n)}return[r[n],n+1]}return new T("not "+e.map(JSON.stringify).join(", "),n)}},N=function(e,r){return function(n,t){var a=e(n,t);return a instanceof T&&a.index===t?r(n,t):a}},q=function(e,r){return function(n,t){var a=e(n,t);if(a instanceof T)return a;var o=r(n,a[1]);return o instanceof T?o:[[a[0],o[0]],o[1]]}},R=function(e){return function(r,n){for(var t=[],a=0;a<e.length;a++){var o=e[a](r,n);if(o instanceof T)return o;t.push(o[0]),n=o[1]}return[t,n]}},F=function(e){return function(r,n){for(var t=new T("alternates",-1),a=0;a<e.length;a++){var o=e[a](r,n);if(!(o instanceof T&&o.index===n))return o;o.index>t.index&&(t=o)}return t}},I=function(e){return function(r,n){for(var t,a=[];!((t=e(r,n))instanceof T);)a.push(t[0]),n=t[1];return t.index===n?[a,n]:t}},K=function(e){return function(r,n){var t=[],a=e(r,n);if(a instanceof T)return a;for(t.push(a[0]),n=a[1];!((a=e(r,n))instanceof T);)t.push(a[0]),n=a[1];return a.index===n?[t,n]:a}},$=function(e){return function(r,n){var t=e(r,n);return t instanceof T&&(t.index=n),t}},z=function(e){return function(r,n){var t=e(r,n);return t instanceof T&&t.index===n?[null,n]:t}},G={comment:E("comment",R([L("#"),I(N(q(L("\\"),D),S(["#"]))),L("#")])),separator:function(e,r){return I(N(F([L(" "),L("\t"),L("\n")]),G.comment))(e,r)},value:function(e,r){return F([K(P(O)),R([L('"'),I(N(q(L("\\"),D),S(['"']))),L('"')]),R([L("'"),I(N(q(L("\\"),D),S(["'"]))),L("'")]),R([L("`"),I(N(q(L("\\"),D),S(["`"]))),L("`")]),R([L("("),G.expression,L(")")]),R([L("["),G.expression,L("]")]),R([L("{"),G.expression,L("}")])])(e,r)},attributes:function(e,r){return E("attributes",I(R([G.value,z(R([L("="),G.value])),G.separator])))(e,r)},text:E("text",K(N(q(L("\\"),D),S(["{","<"])))),fragment:function(e,r){return E("fragment",R([H("<>"),I(F([$(G.node),$(G.nodeData),$(G.nodeDataChildren),$(G.fragment),G.text,G.interpolation])),H("</>")]))(e,r)},interpolation:function(e,r){return E("interpolation",R([L("{"),G.expression,L("}")]))(e,r)},node:function(e,r){return E("node",R([L("<"),G.separator,G.value,G.separator,H("*>")]))(e,r)},nodeData:function(e,r){return E("nodeData",R([L("<"),G.separator,G.value,G.separator,N($(G.attributes),G.value),H("/>")]))(e,r)},nodeDataChildren:function(e,r){return E("nodeDataChildren",R([L("<"),G.separator,G.value,G.separator,G.attributes,L(">"),I(F([$(G.node),$(G.nodeData),$(G.nodeDataChildren),$(G.fragment),G.text,G.interpolation])),H("</"),I(S([">"])),L(">")]))(e,r)},expression:function(e,r){return I(F([R([H("//"),I(S(["\n"]))]),R([H("/*"),I(S(["*/"])),H("*/")]),$(R([L("/"),K(N(q(L("\\"),S(["\n"])),S(["/","\n"]))),L("/")])),G.comment,G.value,$(G.node),$(G.nodeData),$(G.nodeDataChildren),$(G.fragment),L("/"),L("<"),K(S(["/","#",'"',"'","`","(",")","[","]","{","}","<"]))]))(e,r)},main:function(e,r){return q(G.expression,j)(e,r)}};var U=/^\s+$/,W=/(^|[^\\])("|\n)/g;function X(e){return Array.isArray(e)&&3===e.length&&"{"===e[0]&&"}"===e[2]?e[1]:e}function B(e){if(!Array.isArray(e)||"{"!==e[0]||"}"!==e[e.length-1])return!1;var r=e[1];if(!Array.isArray(r))return!1;for(var n=!1,t=!1,a=0;a<r.length;a++){var o=r[a];if("?"===o)t=!0;else if(Array.isArray(o))for(var i=0;i<o.length;i++){var u=o[i];"?"===u&&(t=!0),":"===u&&(n=!0)}else"string"==typeof o&&(-1!==o.indexOf("?")&&(t=!0),-1!==o.indexOf(":")&&(n=!0))}return n&&!t}function J(e){for(var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n="",t=r,a=0;a<e.length;a++){var o=e[a];if("text"===o.type){var i=V(o);i.isWhitespace?n+=i.output:(n+=t+i.output,t=",")}else if("fragment"===o.type){var u=J(o.value[1],t);n+=u.output,t=u.separator}else"interpolation"===o.type?(n+=t+"...Moon.view.normalizeChildren("+V(o.value[1])+")",t=","):(n+=t+V(o),t=",")}return{output:n,separator:t}}function Q(e){var r=V(e);return-1===o.indexOf(r)?r:"Moon.view.components."+r}function V(e){var r,n=e.type;if("string"==typeof e)return e;if(Array.isArray(e)){for(var t="",a=0;a<e.length;a++)t+=V(e[a]);return t}if("comment"===n)return"/*"+V(e.value[1])+"*/";if("attributes"===n){for(var o=e.value,i=[],u=[],s=0;s<o.length;s++){var l=o[s],f=V(X(l[0])),c="className"===(r=f)?"class":"htmlFor"===r?"for":"onChange"===r?"oninput":"onDoubleClick"===r?"ondblclick":"dangerouslySetInnerHTML"===r?"innerHTML":r,d=l[1],v=Array.isArray(d)&&"="===d[0]?d[1]:d,p=v&&B(v);if("..."===c.slice(0,3)){var h=c.slice(3)||V(X(v||[]));i.push(h)}else{var m=null===d?"true":p?"{"+V(v[1])+"}":V(X(v));u.push('"'+c+'":'+m)}}if(0===i.length)return{output:u.join(","),separator:0===u.length?"":",",isExpression:!1};var g=0===u.length?"{}":"{"+u.join(",")+"}";return{output:"Object.assign({}, "+i.join(",")+(u.length?", "+g:"")+")",separator:u.length||i.length?",":"",isExpression:!0}}if("text"===n){var b=V(e.value),y=U.test(b)&&-1!==b.indexOf("\n");return{output:y?b:'Moon.view.components.text({data:"'+b.replace(W,(function(e,r,n){return r+('"'===n?'\\"':"\\n\\\n")}))+'"})',isWhitespace:y}}if("interpolation"===n)return"Moon.view.components.text({data:"+V(e.value[1])+"})";if("node"===n){var x=e.value;return V(x[1])+Q(x[2])+V(x[3])}if("nodeData"===n){var C=e.value,k=C[4];if("attributes"===k.type){var w=function(e){if(!e||1!==e.length)return null;var r=e[0],n=r[0],t=r[1],a=V(n);return null!==t||"{"!==a[0]&&"("!==a[0]&&"["!==a[0]||"{..."===a.slice(0,4)?null:V(X(n))}(k.value);if(null!==w)return""+V(C[1])+Q(C[2])+V(C[3])+"("+w+")"}var M=V(k);return""+V(C[1])+Q(C[2])+V(C[3])+"("+("attributes"===k.type?M.isExpression?M.output:"{"+M.output+"}":M)+")"}if("nodeDataChildren"===n){var A,O=e.value,T=V(O[4]),E=O[6],j=E.length>0,D=j?J(E):{output:""};if(T.isExpression)A=j?"Object.assign({}, "+T.output+", {children:["+D.output+"]})":T.output;else{var L=j?(T.separator||"")+"children:["+D.output+"]":"";A="{"+T.output+L+"}"}return""+V(O[1])+Q(O[2])+V(O[3])+"("+A+")"}return"fragment"===n?"["+J(e.value[1]).output+"]":void 0}function Y(e){var r=function(e){return G.main(e,0)}(e);if("ParseError"===r.constructor.name){var n="Invalid Moon view syntax.\n"+function(e,r,n){for(var t=e.length;t<=r;t++)e+=" ";for(var a=e.split("\n"),o=1,i=1,u=0;u<e.length;u++){var s=e[u];if(u===r){var l=o+":"+i;return"Parse error: expected "+n+" at "+o+":"+i+"\n"+l+" "+(a[o-1]||"")+"\n"+" ".repeat(l.length+1+i-1)+"^"}"\n"===s?(o+=1,i=1):i+=1}return"Parse error: expected "+n+" at end of input"}(e,r.index,r.expected)+"\n\nContext:\n"+function(e,r){for(var n=e.length;n<=r;n++)e+=" ";for(var t=e.split("\n"),a=1,o=1,i=0;i<e.length;i++){var s=e[i];if(i===r){var l=a-1,f=a+1,c=Math.max(Math.floor(Math.log10(l)+1),Math.floor(Math.log10(a)+1),Math.floor(Math.log10(f)+1))+2,d=t[l-1],v=t[a-1],p=t[f-1],h="";return void 0!==d&&(h+=u(l+"| ",c)+d+"\n"),h+=u(a+"| ",c)+v+"\n"+u("| ",c)+u("^",o),void 0!==p&&(h+="\n"+u(f+"| ",c)+p),h}"\n"===s?(a+=1,o=1):o+=1}}(e,r.index);throw i(n),new Error(n)}return V(r[0][0])}var Z=[];return document.addEventListener("DOMContentLoaded",(function(){for(var e=document.querySelectorAll("script"),r=0;r<e.length;r++){var n=e[r];"text/moon"===n.type&&Z.push(n)}!function e(){if(0!==Z.length){var r=Z.shift(),n=r.src;if(0===n.length){var t=document.createElement("script");t.type="text/javascript",t.text=Y(r.text),r.parentNode.replaceChild(t,r),e()}else{var a=new XMLHttpRequest;a.responseType="text",a.onload=function(){if(0===a.status||200===a.status){var t=document.createElement("script");t.type="text/javascript",t.text=Y(a.response),r.parentNode.replaceChild(t,r)}else i("Invalid script HTTP response.\n\nAttempted to download script:\n\t"+n+"\n\nReceived error HTTP status code:\n\t"+a.status+"\n\nExpected OK HTTP status code 0 or 200.");e()},a.onerror=function(){i("Failed script HTTP request.\n\nAttempted to download script:\n\t"+n+"\n\nReceived error.\n\nExpected successful HTTP request."),e()},a.open("GET",n,!0),a.send(null)}}}()})),A}));