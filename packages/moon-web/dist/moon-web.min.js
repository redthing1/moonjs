/**
 * Moon Web v1.0.0-beta.7
 * Copyright 2016-2020 Kabir Shah
 * Released under the MIT License
 * https://moonjs.org
 */
!function(e,t){"undefined"==typeof module?e.Moon=t():module.exports=t()}(this,(function(){"use strict";function e(e,t){this.name=e,this.data=t}var t=null,n=null;function r(e){t=e}function a(e){n=e}var o=["a","abbr","acronym","address","applet","area","article","aside","audio","b","base","basefont","bdi","bdo","bgsound","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","command","content","data","datalist","dd","del","details","dfn","dialog","dir","div","dl","dt","element","em","embed","fieldset","figcaption","figure","font","footer","form","frame","frameset","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","iframe","image","img","input","ins","isindex","kbd","keygen","label","legend","li","link","listing","main","map","mark","marquee","math","menu","menuitem","meta","meter","multicol","nav","nextid","nobr","noembed","noframes","noscript","object","ol","optgroup","option","output","p","param","picture","plaintext","pre","progress","q","rb","rbc","rp","rt","rtc","ruby","s","samp","script","section","select","shadow","slot","small","source","spacer","span","strike","strong","style","sub","summary","sup","svg","table","tbody","td","template","text","textarea","tfoot","th","thead","time","title","tr","track","tt","u","ul","var","video","wbr","xmp"];function i(e){console.error("[Moon] ERROR: "+e)}for(var u={node:function(t){return function(n){return new e(t,n)}}},s=function(){var t=o[c];u[t]=function(n){return new e(t,n)}},c=0;c<o.length;c++)s();var l={components:u,mount:function(t){a(t);for(var o=n.attributes,i={},u=0;u<o.length;u++){var s=o[u];i[s.name]=s.value}r(new e(n.tagName.toLowerCase(),i))}};var f={router:function(e){for(var t=e.route,n="/",r=e.routes,a=1;a<t.length;a++){var o=t[a];"/"===o?(r=(n in r?r[n]:r["/*"])[1],n="/"):n+=o}return(n in r?r[n]:r["/*"])[0](e)}},d={};function v(e){var t=e.name;if("text"===t)return document.createTextNode(e.data.data);var n=document.createElement(t),r=e.data;for(var a in r){var o=r[a];if("o"===a[0]&&"n"===a[1])n[a.toLowerCase()]=o;else switch(a){case"attributes":for(var i in o)n.setAttribute(i,o[i]);break;case"style":var u=n.style;for(var s in o)u[s]=o[s];break;case"focus":o&&n.focus();break;case"class":n.className=o;break;case"for":n.htmlFor=o;break;case"children":for(var c=n.MoonChildren=[],l=0;l<o.length;l++){var f=v(o[l]);c.push(f),n.appendChild(f)}break;default:n[a]=o}}return n}Node.prototype.MoonChildren=null;var p={set:function(e){if(t.name===e.name)!function e(t,n,r){var a=t.data,o=r.data;for(var i in o){var u=a[i],s=o[i];if(u!==s)if("o"===i[0]&&"n"===i[1])n[i.toLowerCase()]=s;else switch(i){case"attributes":if(void 0===u)for(var c in s)n.setAttribute(c,s[c]);else{for(var l in s){var f=s[l];u[l]!==f&&n.setAttribute(l,f)}for(var p in u)p in s||n.removeAttribute(p)}break;case"style":var m=n.style;if(void 0===u)for(var h in s)m[h]=s[h];else{for(var b in s){var g=s[b];u[b]!==g&&(m[b]=g)}for(var x in u)x in s||(m[x]="")}break;case"focus":s?n.focus():n.blur();break;case"class":n.className=s;break;case"for":n.htmlFor=s;break;case"children":var y=s.length;if(void 0===u)for(var w=n.MoonChildren=[],C=0;C<y;C++){var k=v(s[C]);w.push(k),n.appendChild(k)}else{var T=u.length;if(T===y)for(var M=n.MoonChildren,E=0;E<T;E++){var O=u[E],D=s[E];if(O!==D)if(O.name===D.name)e(O,M[E],D);else{var A=v(D);n.replaceChild(A,M[E]),M[E]=A}}else if(T>y){for(var N=n.MoonChildren,L=0;L<y;L++){var P=u[L],j=s[L];if(P!==j)if(P.name===j.name)e(P,N[L],j);else{var q=v(j);n.replaceChild(q,N[L]),N[L]=q}}for(var H=y;H<T;H++)n.removeChild(N.pop())}else{for(var R=n.MoonChildren,S=0;S<T;S++){var F=u[S],$=s[S];if(F!==$)if(F.name===$.name)e(F,R[S],$);else{var G=v($);n.replaceChild(G,R[S]),R[S]=G}}for(var W=T;W<y;W++){var X=v(s[W]);R.push(X),n.appendChild(X)}}}break;default:n[i]=s}}for(var I in a)if(!(I in o))if("o"===I[0]&&"n"===I[1])n[I.toLowerCase()]=null;else switch(I){case"attributes":var J=a.attributes;for(var K in J)n.removeAttribute(K);break;case"focus":n.blur();break;case"class":n.className="";break;case"for":n.htmlFor="";break;case"children":for(var z=a.children.length,B=n.MoonChildren,Q=0;Q<z;Q++)n.removeChild(B.pop());break;default:var U=t.name;n[I]=(U in d?d[U]:d[U]="text"===U?document.createTextNode(""):document.createElement(U))[I]}}(t,n,e);else{var o=v(e);n.parentNode.replaceChild(o,n),a(o)}r(e)}},m={get:function(){return Date.now()},set:function(e){setTimeout(e[1],1e3*e[0])}},h={get:function(){return localStorage},set:function(e){for(var t in e){var n=e[t];localStorage[t]!==n&&(localStorage[t]=n)}for(var r in localStorage)r in e||delete localStorage[r]}},b=/^([^:]+):\s*([^]*?)\s*$/gm,g={set:function(e){var t=new XMLHttpRequest;if(t.responseType="responseType"in e?e.responseType:"text","onLoad"in e&&(t.onload=function(){for(var n,r={},a=t.getAllResponseHeaders();null!==(n=b.exec(a));)r[n[1]]=n[2];e.onLoad({status:t.status,headers:r,body:t.response})}),"onError"in e&&(t.onerror=e.onError),t.open("method"in e?e.method:"GET",e.url),"headers"in e){var n=e.headers;for(var r in n)t.setRequestHeader(r,n[r])}t.send("body"in e?e.body:null)}},x={get:function(){return location.pathname},set:function(e){history.pushState(null,"",e)}},y={data:{}};Object.defineProperty(y,"view",p),Object.defineProperty(y,"time",m),Object.defineProperty(y,"storage",h),Object.defineProperty(y,"http",g),Object.defineProperty(y,"route",x);var w={m:y,route:f,version:"1.0.0-beta.7",view:l},C=/[$\w.]/;function k(e,t){this.expected=e,this.index=t}var T=function(e,t){return function(n,r){var a=t(n,r);return a instanceof k?a:[{type:e,value:a[0]},a[1]]}},M=function(e,t){return t===e.length?["EOF",t]:new k("EOF",t)},E=function(e,t){return t<e.length?[e[t],t+1]:new k("any",t)},O=function(e){return function(t,n){var r=t[n];return r===e?[r,n+1]:new k('"'+e+'"',n)}},D=function(e){return function(t,n){var r=t[n];return void 0!==r&&e.test(r)?[r,n+1]:new k(e.toString(),n)}},A=function(e){return function(t,n){var r=n+e.length;return t.slice(n,r)===e?[e,r]:new k('"'+e+'"',n)}},N=function(e){return function(t,n){if(n<t.length){for(var r=0;r<e.length;r++){var a=e[r];if(t.slice(n,n+a.length)===a)return new k('not "'+a+'"',n)}return[t[n],n+1]}return new k("not "+e.map(JSON.stringify).join(", "),n)}},L=function(e,t){return function(n,r){var a=e(n,r);return a instanceof k&&a.index===r?t(n,r):a}},P=function(e,t){return function(n,r){var a=e(n,r);if(a instanceof k)return a;var o=t(n,a[1]);return o instanceof k?o:[[a[0],o[0]],o[1]]}},j=function(e){return function(t,n){for(var r=[],a=0;a<e.length;a++){var o=e[a](t,n);if(o instanceof k)return o;r.push(o[0]),n=o[1]}return[r,n]}},q=function(e){return function(t,n){for(var r=new k("alternates",-1),a=0;a<e.length;a++){var o=e[a](t,n);if(!(o instanceof k&&o.index===n))return o;o.index>r.index&&(r=o)}return r}},H=function(e){return function(t,n){for(var r,a=[];!((r=e(t,n))instanceof k);)a.push(r[0]),n=r[1];return r.index===n?[a,n]:r}},R=function(e){return function(t,n){var r=[],a=e(t,n);if(a instanceof k)return a;for(r.push(a[0]),n=a[1];!((a=e(t,n))instanceof k);)r.push(a[0]),n=a[1];return a.index===n?[r,n]:a}},S=function(e){return function(t,n){var r=e(t,n);return r instanceof k&&(r.index=n),r}},F={comment:T("comment",j([O("#"),H(L(P(O("\\"),E),N(["#"]))),O("#")])),separator:function(e,t){return H(L(q([O(" "),O("\t"),O("\n")]),F.comment))(e,t)},value:function(e,t){return q([R(D(C)),j([O('"'),H(L(P(O("\\"),E),N(['"']))),O('"')]),j([O("'"),H(L(P(O("\\"),E),N(["'"]))),O("'")]),j([O("`"),H(L(P(O("\\"),E),N(["`"]))),O("`")]),j([O("("),F.expression,O(")")]),j([O("["),F.expression,O("]")]),j([O("{"),F.expression,O("}")])])(e,t)},attributes:function(e,t){return T("attributes",H(j([F.value,O("="),F.value,F.separator])))(e,t)},text:T("text",R(L(P(O("\\"),E),N(["{","<"])))),interpolation:function(e,t){return T("interpolation",j([O("{"),F.expression,O("}")]))(e,t)},node:function(e,t){return T("node",j([O("<"),F.separator,F.value,F.separator,A("*>")]))(e,t)},nodeData:function(e,t){return T("nodeData",j([O("<"),F.separator,F.value,F.separator,L(S(F.attributes),F.value),A("/>")]))(e,t)},nodeDataChildren:function(e,t){return T("nodeDataChildren",j([O("<"),F.separator,F.value,F.separator,F.attributes,O(">"),H(q([S(F.node),S(F.nodeData),S(F.nodeDataChildren),F.text,F.interpolation])),A("</"),H(N([">"])),O(">")]))(e,t)},expression:function(e,t){return H(q([j([A("//"),H(N(["\n"]))]),j([A("/*"),H(N(["*/"])),A("*/")]),S(j([O("/"),R(L(P(O("\\"),N(["\n"])),N(["/","\n"]))),O("/")])),F.comment,F.value,S(F.node),S(F.nodeData),S(F.nodeDataChildren),O("/"),O("<"),R(N(["/","#",'"',"'","`","(",")","[","]","{","}","<"]))]))(e,t)},main:function(e,t){return P(F.expression,M)(e,t)}};var $=/^\s+$/,G=/(^|[^\\])("|\n)/g;function W(e){var t=X(e);return-1===o.indexOf(t)?t:"Moon.view.components."+t}function X(e){var t=e.type;if("string"==typeof e)return e;if(Array.isArray(e)){for(var n="",r=0;r<e.length;r++)n+=X(e[r]);return n}if("comment"===t)return"/*"+X(e.value[1])+"*/";if("attributes"===t){for(var a=e.value,o="",i="",u=0;u<a.length;u++){var s=a[u];o+=i+'"'+X(s[0])+'":'+X(s[2])+X(s[3]),i=","}return{output:o,separator:i}}if("text"===t){var c=X(e.value),l=$.test(c)&&-1!==c.indexOf("\n");return{output:l?c:'Moon.view.components.text({data:"'+c.replace(G,(function(e,t,n){return t+('"'===n?'\\"':"\\n\\\n")}))+'"})',isWhitespace:l}}if("interpolation"===t)return"Moon.view.components.text({data:"+X(e.value[1])+"})";if("node"===t){var f=e.value;return X(f[1])+W(f[2])+X(f[3])}if("nodeData"===t){var d=e.value,v=d[4],p=X(v);return""+X(d[1])+W(d[2])+X(d[3])+"("+("attributes"===v.type?"{"+p.output+"}":p)+")"}if("nodeDataChildren"===t){var m,h=e.value,b=X(h[4]),g=h[6],x=g.length;if(0===x)m="";else{var y="";m=b.separator+"children:[";for(var w=0;w<x;w++){var C=g[w],k=X(C);"text"===C.type?k.isWhitespace?m+=k.output:(m+=y+k.output,y=","):(m+=y+k,y=",")}m+="]"}return""+X(h[1])+W(h[2])+X(h[3])+"({"+b.output+m+"})"}}function I(e){var t=function(e){return F.main(e,0)}(e);return X(t[0][0])}var J=[];return document.addEventListener("DOMContentLoaded",(function(){for(var e=document.querySelectorAll("script"),t=0;t<e.length;t++){var n=e[t];"text/moon"===n.type&&J.push(n)}!function e(){if(0!==J.length){var t=J.shift(),n=t.src;if(0===n.length){var r=document.createElement("script");r.type="text/javascript",r.text=I(t.text),t.parentNode.replaceChild(r,t),e()}else{var a=new XMLHttpRequest;a.responseType="text",a.onload=function(){if(0===a.status||200===a.status){var r=document.createElement("script");r.type="text/javascript",r.text=I(a.response),t.parentNode.replaceChild(r,t)}else i("Invalid script HTTP response.\n\nAttempted to download script:\n\t"+n+"\n\nReceived error HTTP status code:\n\t"+a.status+"\n\nExpected OK HTTP status code 0 or 200.");e()},a.onerror=function(){i("Failed script HTTP request.\n\nAttempted to download script:\n\t"+n+"\n\nReceived error.\n\nExpected successful HTTP request."),e()},a.open("GET",n,!0),a.send(null)}}}()})),w}));