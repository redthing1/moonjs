/**
 * Moon Web v1.0.0-beta.7
 * Copyright 2016-2020 Kabir Shah
 * Released under the MIT License
 * https://moonjs.org
 */
!function(e,t){"undefined"==typeof module?e.Moon=t():module.exports=t()}(this,(function(){"use strict";function e(e,t){this.name=e,this.data=t}var t=null,n=null;function r(e){t=e}function a(e){n=e}var o=["a","abbr","acronym","address","applet","area","article","aside","audio","b","base","basefont","bdi","bdo","bgsound","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","command","content","data","datalist","dd","del","details","dfn","dialog","dir","div","dl","dt","element","em","embed","fieldset","figcaption","figure","font","footer","form","frame","frameset","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","iframe","image","img","input","ins","isindex","kbd","keygen","label","legend","li","link","listing","main","map","mark","marquee","math","menu","menuitem","meta","meter","multicol","nav","nextid","nobr","noembed","noframes","noscript","object","ol","optgroup","option","output","p","param","picture","plaintext","pre","progress","q","rb","rbc","rp","rt","rtc","ruby","s","samp","script","section","select","shadow","slot","small","source","spacer","span","strike","strong","style","sub","summary","sup","svg","table","tbody","td","template","text","textarea","tfoot","th","thead","time","title","tr","track","tt","u","ul","var","video","wbr","xmp"];function i(e){console.error("[Moon] ERROR: "+e)}function u(e,t){for(var n=t-e.length,r=0;r<n;r++)e=" "+e;return e}for(var s={node:function(t){return function(n){return new e(t,n)}}},l=function(){var t=o[c];s[t]=function(n){return new e(t,n)}},c=0;c<o.length;c++)l();var f={components:s,mount:function(t){a(t);for(var o=n.attributes,i={},u=0;u<o.length;u++){var s=o[u];i[s.name]=s.value}r(new e(n.tagName.toLowerCase(),i))}};var d={router:function(e){for(var t=e.route,n="/",r=e.routes,a=1;a<t.length;a++){var o=t[a];"/"===o?(r=(n in r?r[n]:r["/*"])[1],n="/"):n+=o}return(n in r?r[n]:r["/*"])[0](e)}},v={};function p(e){var t=e.name;if("text"===t)return document.createTextNode(e.data.data);var n=document.createElement(t);n.MoonChildren=n.MoonChildren||[];var r=e.data;for(var a in r){var o=r[a];if("o"===a[0]&&"n"===a[1])n[a.toLowerCase()]=o;else switch(a){case"attributes":for(var i in o)n.setAttribute(i,o[i]);break;case"style":var u=n.style;for(var s in o)u[s]=o[s];break;case"innerHTML":n.innerHTML=o;break;case"focus":o&&n.focus();break;case"class":n.className=o;break;case"for":n.htmlFor=o;break;case"children":for(var l=n.MoonChildren=[],c=0;c<o.length;c++){var f=p(o[c]);l.push(f),n.appendChild(f)}break;default:n[a]=o}}return n}Node.prototype.MoonChildren=null;var h={set:function(e){if(t.name===e.name)!function e(t,n,r){var a=t.data,o=r.data;for(var i in o){var u=a[i],s=o[i];if(u!==s)if("o"===i[0]&&"n"===i[1])n[i.toLowerCase()]=s;else switch(i){case"attributes":if(void 0===u)for(var l in s)n.setAttribute(l,s[l]);else{for(var c in s){var f=s[c];u[c]!==f&&n.setAttribute(c,f)}for(var d in u)d in s||n.removeAttribute(d)}break;case"style":var h=n.style;if(void 0===u)for(var m in s)h[m]=s[m];else{for(var b in s){var g=s[b];u[b]!==g&&(h[b]=g)}for(var x in u)x in s||(h[x]="")}break;case"focus":s?n.focus():n.blur();break;case"class":n.className=s;break;case"for":n.htmlFor=s;break;case"children":for(var y=n.MoonChildren||[],w=s.length,C=[],k=!0,M=0;M<w;M++){var T=s[M].data&&s[M].data.key;if(void 0===T){k=!1;break}C.push(T)}if(void 0===u){for(var E=0;E<w;E++){var O=p(s[E]);y.push(O),n.appendChild(O)}n.MoonChildren=y}else if(k){for(var j={},A=0;A<u.length;A++){var D=u[A].data&&u[A].data.key;void 0!==D&&(j[D]={node:u[A],el:y[A],used:!1})}for(var P=[],L=0;L<w;L++){var N=s[L],H=j[C[L]];if(H)e(H.node,H.el,N),H.used=!0,P.push(H.el);else{var q=p(N);P.push(q),n.appendChild(q)}}for(var R in j)j[R].used||n.removeChild(j[R].el);n.MoonChildren=P}else{var S=u.length;if(S===w)for(var F=0;F<S;F++){var $=u[F],G=s[F];if($!==G)if($.name===G.name)e($,y[F],G);else{var I=p(G);n.replaceChild(I,y[F]),y[F]=I}}else if(S>w){for(var W=0;W<w;W++){var X=u[W],J=s[W];if(X!==J)if(X.name===J.name)e(X,y[W],J);else{var K=p(J);n.replaceChild(K,y[W]),y[W]=K}}for(var z=w;z<S;z++)n.removeChild(y.pop())}else{for(var B=0;B<S;B++){var Q=u[B],U=s[B];if(Q!==U)if(Q.name===U.name)e(Q,y[B],U);else{var V=p(U);n.replaceChild(V,y[B]),y[B]=V}}for(var Y=S;Y<w;Y++){var Z=p(s[Y]);y.push(Z),n.appendChild(Z)}}}break;default:n[i]=s}}for(var _ in a)if(!(_ in o))if("o"===_[0]&&"n"===_[1])n[_.toLowerCase()]=null;else switch(_){case"attributes":var ee=a.attributes;for(var te in ee)n.removeAttribute(te);break;case"focus":n.blur();break;case"class":n.className="";break;case"for":n.htmlFor="";break;case"children":for(var ne=a.children.length,re=n.MoonChildren||[],ae=0;ae<ne;ae++)n.removeChild(re.pop());break;default:var oe=t.name;n[_]=(oe in v?v[oe]:v[oe]="text"===oe?document.createTextNode(""):document.createElement(oe))[_]}}(t,n,e);else{var o=p(e);n.parentNode.replaceChild(o,n),a(o)}r(e)}},m={get:function(){return Date.now()},set:function(e){setTimeout(e[1],1e3*e[0])}},b={get:function(){return localStorage},set:function(e){for(var t in e){var n=e[t];localStorage[t]!==n&&(localStorage[t]=n)}for(var r in localStorage)r in e||delete localStorage[r]}},g=/^([^:]+):\s*([^]*?)\s*$/gm,x={set:function(e){var t=new XMLHttpRequest;if(t.responseType="responseType"in e?e.responseType:"text","onLoad"in e&&(t.onload=function(){for(var n,r={},a=t.getAllResponseHeaders();null!==(n=g.exec(a));)r[n[1]]=n[2];e.onLoad({status:t.status,headers:r,body:t.response})}),"onError"in e&&(t.onerror=e.onError),t.open("method"in e?e.method:"GET",e.url),"headers"in e){var n=e.headers;for(var r in n)t.setRequestHeader(r,n[r])}t.send("body"in e?e.body:null)}},y={get:function(){return location.pathname},set:function(e){history.pushState(null,"",e)}},w={data:{}};Object.defineProperty(w,"view",h),Object.defineProperty(w,"time",m),Object.defineProperty(w,"storage",b),Object.defineProperty(w,"http",x),Object.defineProperty(w,"route",y);var C={m:w,route:d,version:"1.0.0-beta.7",view:f},k=/[$\w.]/;function M(e,t){this.expected=e,this.index=t}var T=function(e,t){return function(n,r){var a=t(n,r);return a instanceof M?a:[{type:e,value:a[0]},a[1]]}},E=function(e,t){return t===e.length?["EOF",t]:new M("EOF",t)},O=function(e,t){return t<e.length?[e[t],t+1]:new M("any",t)},j=function(e){return function(t,n){var r=t[n];return r===e?[r,n+1]:new M('"'+e+'"',n)}},A=function(e){return function(t,n){var r=t[n];return void 0!==r&&e.test(r)?[r,n+1]:new M(e.toString(),n)}},D=function(e){return function(t,n){var r=n+e.length;return t.slice(n,r)===e?[e,r]:new M('"'+e+'"',n)}},P=function(e){return function(t,n){if(n<t.length){for(var r=0;r<e.length;r++){var a=e[r];if(t.slice(n,n+a.length)===a)return new M('not "'+a+'"',n)}return[t[n],n+1]}return new M("not "+e.map(JSON.stringify).join(", "),n)}},L=function(e,t){return function(n,r){var a=e(n,r);return a instanceof M&&a.index===r?t(n,r):a}},N=function(e,t){return function(n,r){var a=e(n,r);if(a instanceof M)return a;var o=t(n,a[1]);return o instanceof M?o:[[a[0],o[0]],o[1]]}},H=function(e){return function(t,n){for(var r=[],a=0;a<e.length;a++){var o=e[a](t,n);if(o instanceof M)return o;r.push(o[0]),n=o[1]}return[r,n]}},q=function(e){return function(t,n){for(var r=new M("alternates",-1),a=0;a<e.length;a++){var o=e[a](t,n);if(!(o instanceof M&&o.index===n))return o;o.index>r.index&&(r=o)}return r}},R=function(e){return function(t,n){for(var r,a=[];!((r=e(t,n))instanceof M);)a.push(r[0]),n=r[1];return r.index===n?[a,n]:r}},S=function(e){return function(t,n){var r=[],a=e(t,n);if(a instanceof M)return a;for(r.push(a[0]),n=a[1];!((a=e(t,n))instanceof M);)r.push(a[0]),n=a[1];return a.index===n?[r,n]:a}},F=function(e){return function(t,n){var r=e(t,n);return r instanceof M&&(r.index=n),r}},$=function(e){return function(t,n){var r=e(t,n);return r instanceof M&&r.index===n?[null,n]:r}},G={comment:T("comment",H([j("#"),R(L(N(j("\\"),O),P(["#"]))),j("#")])),separator:function(e,t){return R(L(q([j(" "),j("\t"),j("\n")]),G.comment))(e,t)},value:function(e,t){return q([S(A(k)),H([j('"'),R(L(N(j("\\"),O),P(['"']))),j('"')]),H([j("'"),R(L(N(j("\\"),O),P(["'"]))),j("'")]),H([j("`"),R(L(N(j("\\"),O),P(["`"]))),j("`")]),H([j("("),G.expression,j(")")]),H([j("["),G.expression,j("]")]),H([j("{"),G.expression,j("}")])])(e,t)},attributes:function(e,t){return T("attributes",R(H([G.value,$(H([j("="),G.value])),G.separator])))(e,t)},text:T("text",S(L(N(j("\\"),O),P(["{","<"])))),interpolation:function(e,t){return T("interpolation",H([j("{"),G.expression,j("}")]))(e,t)},node:function(e,t){return T("node",H([j("<"),G.separator,G.value,G.separator,D("*>")]))(e,t)},nodeData:function(e,t){return T("nodeData",H([j("<"),G.separator,G.value,G.separator,L(F(G.attributes),G.value),D("/>")]))(e,t)},nodeDataChildren:function(e,t){return T("nodeDataChildren",H([j("<"),G.separator,G.value,G.separator,G.attributes,j(">"),R(q([F(G.node),F(G.nodeData),F(G.nodeDataChildren),G.text,G.interpolation])),D("</"),R(P([">"])),j(">")]))(e,t)},expression:function(e,t){return R(q([H([D("//"),R(P(["\n"]))]),H([D("/*"),R(P(["*/"])),D("*/")]),F(H([j("/"),S(L(N(j("\\"),P(["\n"])),P(["/","\n"]))),j("/")])),G.comment,G.value,F(G.node),F(G.nodeData),F(G.nodeDataChildren),j("/"),j("<"),S(P(["/","#",'"',"'","`","(",")","[","]","{","}","<"]))]))(e,t)},main:function(e,t){return N(G.expression,E)(e,t)}};var I=/^\s+$/,W=/(^|[^\\])("|\n)/g;function X(e){return Array.isArray(e)&&3===e.length&&"{"===e[0]&&"}"===e[2]?e[1]:e}function J(e){var t=K(e);return-1===o.indexOf(t)?t:"Moon.view.components."+t}function K(e){var t,n=e.type;if("string"==typeof e)return e;if(Array.isArray(e)){for(var r="",a=0;a<e.length;a++)r+=K(e[a]);return r}if("comment"===n)return"/*"+K(e.value[1])+"*/";if("attributes"===n){for(var o=e.value,i=[],u=[],s=0;s<o.length;s++){var l=o[s],c=K(X(l[0])),f="className"===(t=c)?"class":"htmlFor"===t?"for":"onChange"===t?"oninput":"onDoubleClick"===t?"ondblclick":t,d=l[1];if("..."===f.slice(0,3)){var v=f.slice(3)||K(X(d&&d[1]||[]));i.push(v)}else{var p=null===d?"true":K(X(d[1]));u.push('"'+f+'":'+p)}}if(0===i.length)return{output:u.join(","),separator:0===u.length?"":",",isExpression:!1};var h=0===u.length?"{}":"{"+u.join(",")+"}";return{output:"Object.assign({}, "+i.join(",")+(u.length?", "+h:"")+")",separator:u.length||i.length?",":"",isExpression:!0}}if("text"===n){var m=K(e.value),b=I.test(m)&&-1!==m.indexOf("\n");return{output:b?m:'Moon.view.components.text({data:"'+m.replace(W,(function(e,t,n){return t+('"'===n?'\\"':"\\n\\\n")}))+'"})',isWhitespace:b}}if("interpolation"===n)return"Moon.view.components.text({data:"+K(e.value[1])+"})";if("node"===n){var g=e.value;return K(g[1])+J(g[2])+K(g[3])}if("nodeData"===n){var x=e.value,y=x[4],w=K(y);return""+K(x[1])+J(x[2])+K(x[3])+"("+("attributes"===y.type?w.isExpression?w.output:"{"+w.output+"}":w)+")"}if("nodeDataChildren"===n){var C,k=e.value,M=K(k[4]),T=k[6],E=T.length;if(0===E)C="";else{var O="";C=(M.separator||"")+"children:[";for(var j=0;j<E;j++){var A=T[j],D=K(A);"text"===A.type?D.isWhitespace?C+=D.output:(C+=O+D.output,O=","):(C+=O+D,O=",")}C+="]"}return""+K(k[1])+J(k[2])+K(k[3])+"({"+M.output+C+"})"}}function z(e){var t=function(e){return G.main(e,0)}(e);if("ParseError"===t.constructor.name){var n="Invalid Moon view syntax.\n"+function(e,t,n){for(var r=e.length;r<=t;r++)e+=" ";for(var a=e.split("\n"),o=1,i=1,u=0;u<e.length;u++){var s=e[u];if(u===t){var l=o+":"+i;return"Parse error: expected "+n+" at "+o+":"+i+"\n"+l+" "+(a[o-1]||"")+"\n"+" ".repeat(l.length+1+i-1)+"^"}"\n"===s?(o+=1,i=1):i+=1}return"Parse error: expected "+n+" at end of input"}(e,t.index,t.expected)+"\n\nContext:\n"+function(e,t){for(var n=e.length;n<=t;n++)e+=" ";for(var r=e.split("\n"),a=1,o=1,i=0;i<e.length;i++){var s=e[i];if(i===t){var l=a-1,c=a+1,f=Math.max(Math.floor(Math.log10(l)+1),Math.floor(Math.log10(a)+1),Math.floor(Math.log10(c)+1))+2,d=r[l-1],v=r[a-1],p=r[c-1],h="";return void 0!==d&&(h+=u(l+"| ",f)+d+"\n"),h+=u(a+"| ",f)+v+"\n"+u("| ",f)+u("^",o),void 0!==p&&(h+="\n"+u(c+"| ",f)+p),h}"\n"===s?(a+=1,o=1):o+=1}}(e,t.index);throw i(n),new Error(n)}return K(t[0][0])}var B=[];return document.addEventListener("DOMContentLoaded",(function(){for(var e=document.querySelectorAll("script"),t=0;t<e.length;t++){var n=e[t];"text/moon"===n.type&&B.push(n)}!function e(){if(0!==B.length){var t=B.shift(),n=t.src;if(0===n.length){var r=document.createElement("script");r.type="text/javascript",r.text=z(t.text),t.parentNode.replaceChild(r,t),e()}else{var a=new XMLHttpRequest;a.responseType="text",a.onload=function(){if(0===a.status||200===a.status){var r=document.createElement("script");r.type="text/javascript",r.text=z(a.response),t.parentNode.replaceChild(r,t)}else i("Invalid script HTTP response.\n\nAttempted to download script:\n\t"+n+"\n\nReceived error HTTP status code:\n\t"+a.status+"\n\nExpected OK HTTP status code 0 or 200.");e()},a.onerror=function(){i("Failed script HTTP request.\n\nAttempted to download script:\n\t"+n+"\n\nReceived error.\n\nExpected successful HTTP request."),e()},a.open("GET",n,!0),a.send(null)}}}()})),C}));