/**
 * Moon Web v1.0.0-beta.7
 * Copyright 2016-2020 Kabir Shah
 * Released under the MIT License
 * https://moonjs.org
 */
!function(e,t){"undefined"==typeof module?e.Moon=t():module.exports=t()}(this,(function(){"use strict";function e(e,t){this.name=e,this.data=t}var t=null,r=null;function n(e){t=e}function a(e){r=e}var o=["a","abbr","acronym","address","applet","area","article","aside","audio","b","base","basefont","bdi","bdo","bgsound","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","command","content","data","datalist","dd","del","details","dfn","dialog","dir","div","dl","dt","element","em","embed","fieldset","figcaption","figure","font","footer","form","frame","frameset","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","iframe","image","img","input","ins","isindex","kbd","keygen","label","legend","li","link","listing","main","map","mark","marquee","math","menu","menuitem","meta","meter","multicol","nav","nextid","nobr","noembed","noframes","noscript","object","ol","optgroup","option","output","p","param","picture","plaintext","pre","progress","q","rb","rbc","rp","rt","rtc","ruby","s","samp","script","section","select","shadow","slot","small","source","spacer","span","strike","strong","style","sub","summary","sup","svg","table","tbody","td","template","text","textarea","tfoot","th","thead","time","title","tr","track","tt","u","ul","var","video","wbr","xmp"];function i(e){console.error("[Moon] ERROR: "+e)}function u(e,t){for(var r=t-e.length,n=0;n<r;n++)e=" "+e;return e}for(var s={node:function(t){return function(r){return new e(t,r)}}},l=function(){var t=o[f];s[t]=function(r){return new e(t,r)}},f=0;f<o.length;f++)l();var c={components:s,mount:function(t){a(t);for(var o=r.attributes,i={},u=0;u<o.length;u++){var s=o[u];i[s.name]=s.value}n(new e(r.tagName.toLowerCase(),i))},normalizeChildren:function e(t){if(null==t||"boolean"==typeof t)return[];if(Array.isArray(t)){for(var r=[],n=0;n<t.length;n++)for(var a=e(t[n]),o=0;o<a.length;o++)r.push(a[o]);return r}var i=typeof t;return"string"===i||"number"===i||"bigint"===i?[s.text({data:String(t)})]:t&&void 0!==t.name?[t]:[s.text({data:String(t)})]}};var d={router:function(e){for(var t=e.route,r="/",n=e.routes,a=1;a<t.length;a++){var o=t[a];"/"===o?(n=(r in n?n[r]:n["/*"])[1],r="/"):r+=o}return(r in n?n[r]:n["/*"])[0](e)}},v={};function p(e){var t=e.name;if("text"===t)return document.createTextNode(e.data.data);var r=document.createElement(t);r.MoonChildren=r.MoonChildren||[];var n=e.data;for(var a in n){var o=n[a];if("o"===a[0]&&"n"===a[1])r[a.toLowerCase()]=o;else switch(a){case"attributes":for(var i in o)r.setAttribute(i,o[i]);break;case"style":var u=r.style;for(var s in o)u[s]=o[s];break;case"innerHTML":r.innerHTML=o;break;case"focus":o&&r.focus();break;case"class":r.className=o;break;case"for":r.htmlFor=o;break;case"children":for(var l=r.MoonChildren=[],f=0;f<o.length;f++){var c=p(o[f]);l.push(c),r.appendChild(c)}break;default:r[a]=o}}return r}Node.prototype.MoonChildren=null;var h={set:function(e){if(t.name===e.name)!function e(t,r,n){var a=t.data,o=n.data;for(var i in o){var u=a[i],s=o[i];if(u!==s)if("o"===i[0]&&"n"===i[1])r[i.toLowerCase()]=s;else switch(i){case"attributes":if(void 0===u)for(var l in s)r.setAttribute(l,s[l]);else{for(var f in s){var c=s[f];u[f]!==c&&r.setAttribute(f,c)}for(var d in u)d in s||r.removeAttribute(d)}break;case"style":var h=r.style;if(void 0===u)for(var m in s)h[m]=s[m];else{for(var g in s){var b=s[g];u[g]!==b&&(h[g]=b)}for(var x in u)x in s||(h[x]="")}break;case"focus":s?r.focus():r.blur();break;case"class":r.className=s;break;case"for":r.htmlFor=s;break;case"children":for(var y=r.MoonChildren||[],C=s.length,w=[],k=!0,M=0;M<C;M++){var A=s[M].data&&s[M].data.key;if(void 0===A){k=!1;break}w.push(A)}if(void 0===u){for(var T=0;T<C;T++){var E=p(s[T]);y.push(E),r.appendChild(E)}r.MoonChildren=y}else if(k){for(var O={},D=0;D<u.length;D++){var j=u[D].data&&u[D].data.key;void 0!==j&&(O[j]={node:u[D],el:y[D],used:!1})}for(var L=[],H=0;H<C;H++){var P=s[H],N=O[w[H]];if(N)e(N.node,N.el,P),N.used=!0,L.push(N.el);else{var S=p(P);L.push(S),r.appendChild(S)}}for(var q in O)O[q].used||r.removeChild(O[q].el);r.MoonChildren=L}else{var R=u.length;if(R===C)for(var F=0;F<R;F++){var I=u[F],$=s[F];if(I!==$)if(I.name===$.name)e(I,y[F],$);else{var z=p($);r.replaceChild(z,y[F]),y[F]=z}}else if(R>C){for(var G=0;G<C;G++){var W=u[G],X=s[G];if(W!==X)if(W.name===X.name)e(W,y[G],X);else{var J=p(X);r.replaceChild(J,y[G]),y[G]=J}}for(var K=C;K<R;K++)r.removeChild(y.pop())}else{for(var B=0;B<R;B++){var Q=u[B],U=s[B];if(Q!==U)if(Q.name===U.name)e(Q,y[B],U);else{var V=p(U);r.replaceChild(V,y[B]),y[B]=V}}for(var Y=R;Y<C;Y++){var Z=p(s[Y]);y.push(Z),r.appendChild(Z)}}}break;default:r[i]=s}}for(var _ in a)if(!(_ in o))if("o"===_[0]&&"n"===_[1])r[_.toLowerCase()]=null;else switch(_){case"attributes":var ee=a.attributes;for(var te in ee)r.removeAttribute(te);break;case"focus":r.blur();break;case"class":r.className="";break;case"for":r.htmlFor="";break;case"children":for(var re=a.children.length,ne=r.MoonChildren||[],ae=0;ae<re;ae++)r.removeChild(ne.pop());break;default:var oe=t.name;r[_]=(oe in v?v[oe]:v[oe]="text"===oe?document.createTextNode(""):document.createElement(oe))[_]}}(t,r,e);else{var o=p(e);r.parentNode.replaceChild(o,r),a(o)}n(e)}},m={get:function(){return Date.now()},set:function(e){setTimeout(e[1],1e3*e[0])}},g={get:function(){return localStorage},set:function(e){for(var t in e){var r=e[t];localStorage[t]!==r&&(localStorage[t]=r)}for(var n in localStorage)n in e||delete localStorage[n]}},b=/^([^:]+):\s*([^]*?)\s*$/gm,x={set:function(e){var t=new XMLHttpRequest;if(t.responseType="responseType"in e?e.responseType:"text","onLoad"in e&&(t.onload=function(){for(var r,n={},a=t.getAllResponseHeaders();null!==(r=b.exec(a));)n[r[1]]=r[2];e.onLoad({status:t.status,headers:n,body:t.response})}),"onError"in e&&(t.onerror=e.onError),t.open("method"in e?e.method:"GET",e.url),"headers"in e){var r=e.headers;for(var n in r)t.setRequestHeader(n,r[n])}t.send("body"in e?e.body:null)}},y={get:function(){return location.pathname},set:function(e){history.pushState(null,"",e)}},C={data:{}};Object.defineProperty(C,"view",h),Object.defineProperty(C,"time",m),Object.defineProperty(C,"storage",g),Object.defineProperty(C,"http",x),Object.defineProperty(C,"route",y);var w={m:C,route:d,version:"1.0.0-beta.7",view:c},k=/[-$\w.]/;function M(e,t){this.expected=e,this.index=t}var A=function(e,t){return function(r,n){var a=t(r,n);return a instanceof M?a:[{type:e,value:a[0]},a[1]]}},T=function(e,t){return t===e.length?["EOF",t]:new M("EOF",t)},E=function(e,t){return t<e.length?[e[t],t+1]:new M("any",t)},O=function(e){return function(t,r){var n=t[r];return n===e?[n,r+1]:new M('"'+e+'"',r)}},D=function(e){return function(t,r){var n=t[r];return void 0!==n&&e.test(n)?[n,r+1]:new M(e.toString(),r)}},j=function(e){return function(t,r){var n=r+e.length;return t.slice(r,n)===e?[e,n]:new M('"'+e+'"',r)}},L=function(e){return function(t,r){if(r<t.length){for(var n=0;n<e.length;n++){var a=e[n];if(t.slice(r,r+a.length)===a)return new M('not "'+a+'"',r)}return[t[r],r+1]}return new M("not "+e.map(JSON.stringify).join(", "),r)}},H=function(e,t){return function(r,n){var a=e(r,n);return a instanceof M&&a.index===n?t(r,n):a}},P=function(e,t){return function(r,n){var a=e(r,n);if(a instanceof M)return a;var o=t(r,a[1]);return o instanceof M?o:[[a[0],o[0]],o[1]]}},N=function(e){return function(t,r){for(var n=[],a=0;a<e.length;a++){var o=e[a](t,r);if(o instanceof M)return o;n.push(o[0]),r=o[1]}return[n,r]}},S=function(e){return function(t,r){for(var n=new M("alternates",-1),a=0;a<e.length;a++){var o=e[a](t,r);if(!(o instanceof M&&o.index===r))return o;o.index>n.index&&(n=o)}return n}},q=function(e){return function(t,r){for(var n,a=[];!((n=e(t,r))instanceof M);)a.push(n[0]),r=n[1];return n.index===r?[a,r]:n}},R=function(e){return function(t,r){var n=[],a=e(t,r);if(a instanceof M)return a;for(n.push(a[0]),r=a[1];!((a=e(t,r))instanceof M);)n.push(a[0]),r=a[1];return a.index===r?[n,r]:a}},F=function(e){return function(t,r){var n=e(t,r);return n instanceof M&&(n.index=r),n}},I=function(e){return function(t,r){var n=e(t,r);return n instanceof M&&n.index===r?[null,r]:n}},$={comment:A("comment",N([O("#"),q(H(P(O("\\"),E),L(["#"]))),O("#")])),separator:function(e,t){return q(H(S([O(" "),O("\t"),O("\n")]),$.comment))(e,t)},value:function(e,t){return S([R(D(k)),N([O('"'),q(H(P(O("\\"),E),L(['"']))),O('"')]),N([O("'"),q(H(P(O("\\"),E),L(["'"]))),O("'")]),N([O("`"),q(H(P(O("\\"),E),L(["`"]))),O("`")]),N([O("("),$.expression,O(")")]),N([O("["),$.expression,O("]")]),N([O("{"),$.expression,O("}")])])(e,t)},attributes:function(e,t){return A("attributes",q(N([$.value,I(N([O("="),$.value])),$.separator])))(e,t)},text:A("text",R(H(P(O("\\"),E),L(["{","<"])))),fragment:function(e,t){return A("fragment",N([j("<>"),q(S([F($.node),F($.nodeData),F($.nodeDataChildren),F($.fragment),$.text,$.interpolation])),j("</>")]))(e,t)},interpolation:function(e,t){return A("interpolation",N([O("{"),$.expression,O("}")]))(e,t)},node:function(e,t){return A("node",N([O("<"),$.separator,$.value,$.separator,j("*>")]))(e,t)},nodeData:function(e,t){return A("nodeData",N([O("<"),$.separator,$.value,$.separator,H(F($.attributes),$.value),j("/>")]))(e,t)},nodeDataChildren:function(e,t){return A("nodeDataChildren",N([O("<"),$.separator,$.value,$.separator,$.attributes,O(">"),q(S([F($.node),F($.nodeData),F($.nodeDataChildren),F($.fragment),$.text,$.interpolation])),j("</"),q(L([">"])),O(">")]))(e,t)},expression:function(e,t){return q(S([N([j("//"),q(L(["\n"]))]),N([j("/*"),q(L(["*/"])),j("*/")]),F(N([O("/"),R(H(P(O("\\"),L(["\n"])),L(["/","\n"]))),O("/")])),$.comment,$.value,F($.node),F($.nodeData),F($.nodeDataChildren),F($.fragment),O("/"),O("<"),R(L(["/","#",'"',"'","`","(",")","[","]","{","}","<"]))]))(e,t)},main:function(e,t){return P($.expression,T)(e,t)}};var z=/^\s+$/,G=/(^|[^\\])("|\n)/g;function W(e){return Array.isArray(e)&&3===e.length&&"{"===e[0]&&"}"===e[2]?e[1]:e}function X(e){if(!Array.isArray(e)||"{"!==e[0]||"}"!==e[e.length-1])return!1;var t=e[1];if(!Array.isArray(t))return!1;for(var r=!1,n=!1,a=0;a<t.length;a++){var o=t[a];if("?"===o)n=!0;else if(Array.isArray(o))for(var i=0;i<o.length;i++){var u=o[i];"?"===u&&(n=!0),":"===u&&(r=!0)}else"string"==typeof o&&(-1!==o.indexOf("?")&&(n=!0),-1!==o.indexOf(":")&&(r=!0))}return r&&!n}function J(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",r="",n=t,a=0;a<e.length;a++){var o=e[a];if("text"===o.type){var i=B(o);i.isWhitespace?r+=i.output:(r+=n+i.output,n=",")}else if("fragment"===o.type){var u=J(o.value[1],n);r+=u.output,n=u.separator}else"interpolation"===o.type?(r+=n+"...Moon.view.normalizeChildren("+B(o.value[1])+")",n=","):(r+=n+B(o),n=",")}return{output:r,separator:n}}function K(e){var t=B(e);return-1===o.indexOf(t)?t:"Moon.view.components."+t}function B(e){var t,r=e.type;if("string"==typeof e)return e;if(Array.isArray(e)){for(var n="",a=0;a<e.length;a++)n+=B(e[a]);return n}if("comment"===r)return"/*"+B(e.value[1])+"*/";if("attributes"===r){for(var o=e.value,i=[],u=[],s=0;s<o.length;s++){var l=o[s],f=B(W(l[0])),c="className"===(t=f)?"class":"htmlFor"===t?"for":"onChange"===t?"oninput":"onDoubleClick"===t?"ondblclick":"dangerouslySetInnerHTML"===t?"innerHTML":t,d=l[1],v=Array.isArray(d)&&"="===d[0]?d[1]:d,p=v&&X(v);if("..."===c.slice(0,3)){var h=c.slice(3)||B(W(v||[]));i.push(h)}else{var m=null===d?"true":p?"{"+B(v[1])+"}":B(W(v));u.push('"'+c+'":'+m)}}if(0===i.length)return{output:u.join(","),separator:0===u.length?"":",",isExpression:!1};var g=0===u.length?"{}":"{"+u.join(",")+"}";return{output:"Object.assign({}, "+i.join(",")+(u.length?", "+g:"")+")",separator:u.length||i.length?",":"",isExpression:!0}}if("text"===r){var b=B(e.value),x=z.test(b)&&-1!==b.indexOf("\n");return{output:x?b:'Moon.view.components.text({data:"'+b.replace(G,(function(e,t,r){return t+('"'===r?'\\"':"\\n\\\n")}))+'"})',isWhitespace:x}}if("interpolation"===r)return"Moon.view.components.text({data:"+B(e.value[1])+"})";if("node"===r){var y=e.value;return B(y[1])+K(y[2])+B(y[3])}if("nodeData"===r){var C=e.value,w=C[4];if("attributes"===w.type){var k=function(e){if(!e||1!==e.length)return null;var t=e[0],r=t[0],n=t[1],a=B(r);return null!==n||"{"!==a[0]&&"("!==a[0]&&"["!==a[0]||"{..."===a.slice(0,4)?null:B(W(r))}(w.value);if(null!==k)return""+B(C[1])+K(C[2])+B(C[3])+"("+k+")"}var M=B(w);return""+B(C[1])+K(C[2])+B(C[3])+"("+("attributes"===w.type?M.isExpression?M.output:"{"+M.output+"}":M)+")"}if("nodeDataChildren"===r){var A,T=e.value,E=B(T[4]),O=T[6],D=O.length>0,j=D?J(O):{output:""};if(E.isExpression)A=D?"Object.assign({}, "+E.output+", {children:["+j.output+"]})":E.output;else{var L=D?(E.separator||"")+"children:["+j.output+"]":"";A="{"+E.output+L+"}"}return""+B(T[1])+K(T[2])+B(T[3])+"("+A+")"}return"fragment"===r?"["+J(e.value[1]).output+"]":void 0}function Q(e){var t=function(e){return $.main(e,0)}(e);if("ParseError"===t.constructor.name){var r="Invalid Moon view syntax.\n"+function(e,t,r){for(var n=e.length;n<=t;n++)e+=" ";for(var a=e.split("\n"),o=1,i=1,u=0;u<e.length;u++){var s=e[u];if(u===t){var l=o+":"+i;return"Parse error: expected "+r+" at "+o+":"+i+"\n"+l+" "+(a[o-1]||"")+"\n"+" ".repeat(l.length+1+i-1)+"^"}"\n"===s?(o+=1,i=1):i+=1}return"Parse error: expected "+r+" at end of input"}(e,t.index,t.expected)+"\n\nContext:\n"+function(e,t){for(var r=e.length;r<=t;r++)e+=" ";for(var n=e.split("\n"),a=1,o=1,i=0;i<e.length;i++){var s=e[i];if(i===t){var l=a-1,f=a+1,c=Math.max(Math.floor(Math.log10(l)+1),Math.floor(Math.log10(a)+1),Math.floor(Math.log10(f)+1))+2,d=n[l-1],v=n[a-1],p=n[f-1],h="";return void 0!==d&&(h+=u(l+"| ",c)+d+"\n"),h+=u(a+"| ",c)+v+"\n"+u("| ",c)+u("^",o),void 0!==p&&(h+="\n"+u(f+"| ",c)+p),h}"\n"===s?(a+=1,o=1):o+=1}}(e,t.index);throw i(r),new Error(r)}return B(t[0][0])}var U=[];return document.addEventListener("DOMContentLoaded",(function(){for(var e=document.querySelectorAll("script"),t=0;t<e.length;t++){var r=e[t];"text/moon"===r.type&&U.push(r)}!function e(){if(0!==U.length){var t=U.shift(),r=t.src;if(0===r.length){var n=document.createElement("script");n.type="text/javascript",n.text=Q(t.text),t.parentNode.replaceChild(n,t),e()}else{var a=new XMLHttpRequest;a.responseType="text",a.onload=function(){if(0===a.status||200===a.status){var n=document.createElement("script");n.type="text/javascript",n.text=Q(a.response),t.parentNode.replaceChild(n,t)}else i("Invalid script HTTP response.\n\nAttempted to download script:\n\t"+r+"\n\nReceived error HTTP status code:\n\t"+a.status+"\n\nExpected OK HTTP status code 0 or 200.");e()},a.onerror=function(){i("Failed script HTTP request.\n\nAttempted to download script:\n\t"+r+"\n\nReceived error.\n\nExpected successful HTTP request."),e()},a.open("GET",r,!0),a.send(null)}}}()})),w}));