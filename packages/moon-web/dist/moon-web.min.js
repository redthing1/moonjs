/**
 * Moon Web v1.0.0-beta.7
 * Copyright 2016-2020 Kabir Shah
 * Released under the MIT License
 * https://moonjs.org
 */
!function(e,t){"undefined"==typeof module?e.Moon=t():module.exports=t()}(this,(function(){"use strict";function e(e,t){this.name=e,this.data=t}var t=null,r=null;function n(e){t=e}function a(e){r=e}var o=["a","abbr","acronym","address","applet","area","article","aside","audio","b","base","basefont","bdi","bdo","bgsound","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","command","content","data","datalist","dd","del","details","dfn","dialog","dir","div","dl","dt","element","em","embed","fieldset","figcaption","figure","font","footer","form","frame","frameset","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","iframe","image","img","input","ins","isindex","kbd","keygen","label","legend","li","link","listing","main","map","mark","marquee","math","menu","menuitem","meta","meter","multicol","nav","nextid","nobr","noembed","noframes","noscript","object","ol","optgroup","option","output","p","param","picture","plaintext","pre","progress","q","rb","rbc","rp","rt","rtc","ruby","s","samp","script","section","select","shadow","slot","small","source","spacer","span","strike","strong","style","sub","summary","sup","svg","table","tbody","td","template","text","textarea","tfoot","th","thead","time","title","tr","track","tt","u","ul","var","video","wbr","xmp"];function i(e){console.error("[Moon] ERROR: "+e)}function u(e,t){for(var r=t-e.length,n=0;n<r;n++)e=" "+e;return e}for(var s={node:function(t){return function(r){return new e(t,r)}}},l=function(){var t=o[f];s[t]=function(r){return new e(t,r)}},f=0;f<o.length;f++)l();var c={components:s,mount:function(t){a(t);for(var o=r.attributes,i={},u=0;u<o.length;u++){var s=o[u];i[s.name]=s.value}n(new e(r.tagName.toLowerCase(),i))},normalizeChildren:function e(t){if(null==t||"boolean"==typeof t)return[];if(Array.isArray(t)){for(var r=[],n=0;n<t.length;n++)for(var a=e(t[n]),o=0;o<a.length;o++)r.push(a[o]);return r}var i=typeof t;return"string"===i||"number"===i||"bigint"===i?[s.text({data:String(t)})]:t&&void 0!==t.name?[t]:[s.text({data:String(t)})]}};var d={router:function(e){for(var t=e.route,r="/",n=e.routes,a=1;a<t.length;a++){var o=t[a];"/"===o?(n=(r in n?n[r]:n["/*"])[1],r="/"):r+=o}return(r in n?n[r]:n["/*"])[0](e)}},v={};Object.create(null);function p(e,t){e&&("function"==typeof e?e(t):"object"==typeof e&&(e.current=t))}function h(e){var t=e.name;if("text"===t)return document.createTextNode(e.data.data);var r=document.createElement(t);r.MoonChildren=r.MoonChildren||[];var n=e.data;for(var a in n){var o=n[a];if("o"===a[0]&&"n"===a[1])r[a.toLowerCase()]=o;else switch(a){case"attributes":for(var i in o)r.setAttribute(i,o[i]);break;case"style":var u=r.style;for(var s in o)u[s]=o[s];break;case"innerHTML":r.innerHTML=o;break;case"focus":o&&r.focus();break;case"class":r.className=o;break;case"for":r.htmlFor=o;break;case"ref":p(o,r);break;case"children":for(var l=r.MoonChildren=[],f=0;f<o.length;f++){var c=h(o[f]);l.push(c),r.appendChild(c)}break;default:r[a]=o}}return r}Node.prototype.MoonChildren=null;var m={set:function(e){if(t.name===e.name)!function e(t,r,n){var a=t.data,o=n.data;for(var i in o){var u=a[i],s=o[i];if(u!==s)if("o"===i[0]&&"n"===i[1])r[i.toLowerCase()]=s;else switch(i){case"attributes":if(void 0===u)for(var l in s)r.setAttribute(l,s[l]);else{for(var f in s){var c=s[f];u[f]!==c&&r.setAttribute(f,c)}for(var d in u)d in s||r.removeAttribute(d)}break;case"style":var m=r.style;if(void 0===u)for(var g in s)m[g]=s[g];else{for(var b in s){var x=s[b];u[b]!==x&&(m[b]=x)}for(var y in u)y in s||(m[y]="")}break;case"focus":s?r.focus():r.blur();break;case"class":r.className=s;break;case"for":r.htmlFor=s;break;case"children":for(var C=r.MoonChildren||[],w=s.length,k=[],M=!0,A=0;A<w;A++){var T=s[A].data&&s[A].data.key;void 0===T?M=!1:!0,k.push(T)}if(void 0===u){for(var E=0;E<w;E++){var O=h(s[E]);C.push(O),r.appendChild(O)}r.MoonChildren=C}else if(M){for(var j={},D=0;D<u.length;D++){var L=u[D].data&&u[D].data.key;void 0!==L&&(j[L]={node:u[D],el:C[D],used:!1})}for(var H=[],P=0;P<w;P++){var N=s[P],S=j[k[P]];if(S)e(S.node,S.el,N),S.used=!0,H.push(S.el);else{var q=h(N);H.push(q),r.appendChild(q)}}for(var R in j)j[R].used||r.removeChild(j[R].el);r.MoonChildren=H}else{var F=u.length;if(F===w)for(var I=0;I<F;I++){var $=u[I],z=s[I];if($!==z)if($.name===z.name)e($,C[I],z);else{var G=h(z);r.replaceChild(G,C[I]),C[I]=G}}else if(F>w){for(var W=0;W<w;W++){var X=u[W],J=s[W];if(X!==J)if(X.name===J.name)e(X,C[W],J);else{var K=h(J);r.replaceChild(K,C[W]),C[W]=K}}for(var B=w;B<F;B++)r.removeChild(C.pop())}else{for(var Q=0;Q<F;Q++){var U=u[Q],V=s[Q];if(U!==V)if(U.name===V.name)e(U,C[Q],V);else{var Y=h(V);r.replaceChild(Y,C[Q]),C[Q]=Y}}for(var Z=F;Z<w;Z++){var _=h(s[Z]);C.push(_),r.appendChild(_)}}}break;default:r[i]=s}}for(var ee in a)if(!(ee in o))if("o"===ee[0]&&"n"===ee[1])r[ee.toLowerCase()]=null;else switch(ee){case"attributes":var te=a.attributes;for(var re in te)r.removeAttribute(re);break;case"focus":r.blur();break;case"class":r.className="";break;case"for":r.htmlFor="";break;case"children":for(var ne=a.children.length,ae=r.MoonChildren||[],oe=0;oe<ne;oe++)r.removeChild(ae.pop());break;case"ref":p(a.ref,null);break;default:var ie=t.name;r[ee]=(ie in v?v[ie]:v[ie]="text"===ie?document.createTextNode(""):document.createElement(ie))[ee]}}(t,r,e);else{var o=h(e);r.parentNode.replaceChild(o,r),a(o)}n(e)}},g={get:function(){return Date.now()},set:function(e){setTimeout(e[1],1e3*e[0])}},b={get:function(){return localStorage},set:function(e){for(var t in e){var r=e[t];localStorage[t]!==r&&(localStorage[t]=r)}for(var n in localStorage)n in e||delete localStorage[n]}},x=/^([^:]+):\s*([^]*?)\s*$/gm,y={set:function(e){var t=new XMLHttpRequest;if(t.responseType="responseType"in e?e.responseType:"text","onLoad"in e&&(t.onload=function(){for(var r,n={},a=t.getAllResponseHeaders();null!==(r=x.exec(a));)n[r[1]]=r[2];e.onLoad({status:t.status,headers:n,body:t.response})}),"onError"in e&&(t.onerror=e.onError),t.open("method"in e?e.method:"GET",e.url),"headers"in e){var r=e.headers;for(var n in r)t.setRequestHeader(n,r[n])}t.send("body"in e?e.body:null)}},C={get:function(){return location.pathname},set:function(e){history.pushState(null,"",e)}},w={data:{}};Object.defineProperty(w,"view",m),Object.defineProperty(w,"time",g),Object.defineProperty(w,"storage",b),Object.defineProperty(w,"http",y),Object.defineProperty(w,"route",C);var k={m:w,route:d,version:"1.0.0-beta.7",view:c},M=/[-$\w.]/;function A(e,t){this.expected=e,this.index=t}var T=function(e,t){return function(r,n){var a=t(r,n);return a instanceof A?a:[{type:e,value:a[0]},a[1]]}},E=function(e,t){return t===e.length?["EOF",t]:new A("EOF",t)},O=function(e,t){return t<e.length?[e[t],t+1]:new A("any",t)},j=function(e){return function(t,r){var n=t[r];return n===e?[n,r+1]:new A('"'+e+'"',r)}},D=function(e){return function(t,r){var n=t[r];return void 0!==n&&e.test(n)?[n,r+1]:new A(e.toString(),r)}},L=function(e){return function(t,r){var n=r+e.length;return t.slice(r,n)===e?[e,n]:new A('"'+e+'"',r)}},H=function(e){return function(t,r){if(r<t.length){for(var n=0;n<e.length;n++){var a=e[n];if(t.slice(r,r+a.length)===a)return new A('not "'+a+'"',r)}return[t[r],r+1]}return new A("not "+e.map(JSON.stringify).join(", "),r)}},P=function(e,t){return function(r,n){var a=e(r,n);return a instanceof A&&a.index===n?t(r,n):a}},N=function(e,t){return function(r,n){var a=e(r,n);if(a instanceof A)return a;var o=t(r,a[1]);return o instanceof A?o:[[a[0],o[0]],o[1]]}},S=function(e){return function(t,r){for(var n=[],a=0;a<e.length;a++){var o=e[a](t,r);if(o instanceof A)return o;n.push(o[0]),r=o[1]}return[n,r]}},q=function(e){return function(t,r){for(var n=new A("alternates",-1),a=0;a<e.length;a++){var o=e[a](t,r);if(!(o instanceof A&&o.index===r))return o;o.index>n.index&&(n=o)}return n}},R=function(e){return function(t,r){for(var n,a=[];!((n=e(t,r))instanceof A);)a.push(n[0]),r=n[1];return n.index===r?[a,r]:n}},F=function(e){return function(t,r){var n=[],a=e(t,r);if(a instanceof A)return a;for(n.push(a[0]),r=a[1];!((a=e(t,r))instanceof A);)n.push(a[0]),r=a[1];return a.index===r?[n,r]:a}},I=function(e){return function(t,r){var n=e(t,r);return n instanceof A&&(n.index=r),n}},$=function(e){return function(t,r){var n=e(t,r);return n instanceof A&&n.index===r?[null,r]:n}},z={comment:T("comment",S([j("#"),R(P(N(j("\\"),O),H(["#"]))),j("#")])),separator:function(e,t){return R(P(q([j(" "),j("\t"),j("\n")]),z.comment))(e,t)},value:function(e,t){return q([F(D(M)),S([j('"'),R(P(N(j("\\"),O),H(['"']))),j('"')]),S([j("'"),R(P(N(j("\\"),O),H(["'"]))),j("'")]),S([j("`"),R(P(N(j("\\"),O),H(["`"]))),j("`")]),S([j("("),z.expression,j(")")]),S([j("["),z.expression,j("]")]),S([j("{"),z.expression,j("}")])])(e,t)},attributes:function(e,t){return T("attributes",R(S([z.value,$(S([j("="),z.value])),z.separator])))(e,t)},text:T("text",F(P(N(j("\\"),O),H(["{","<"])))),fragment:function(e,t){return T("fragment",S([L("<>"),R(q([I(z.node),I(z.nodeData),I(z.nodeDataChildren),I(z.fragment),z.text,z.interpolation])),L("</>")]))(e,t)},interpolation:function(e,t){return T("interpolation",S([j("{"),z.expression,j("}")]))(e,t)},node:function(e,t){return T("node",S([j("<"),z.separator,z.value,z.separator,L("*>")]))(e,t)},nodeData:function(e,t){return T("nodeData",S([j("<"),z.separator,z.value,z.separator,P(I(z.attributes),z.value),L("/>")]))(e,t)},nodeDataChildren:function(e,t){return T("nodeDataChildren",S([j("<"),z.separator,z.value,z.separator,z.attributes,j(">"),R(q([I(z.node),I(z.nodeData),I(z.nodeDataChildren),I(z.fragment),z.text,z.interpolation])),L("</"),R(H([">"])),j(">")]))(e,t)},expression:function(e,t){return R(q([S([L("//"),R(H(["\n"]))]),S([L("/*"),R(H(["*/"])),L("*/")]),I(S([j("/"),F(P(N(j("\\"),H(["\n"])),H(["/","\n"]))),j("/")])),z.comment,z.value,I(z.node),I(z.nodeData),I(z.nodeDataChildren),I(z.fragment),j("/"),j("<"),F(H(["/","#",'"',"'","`","(",")","[","]","{","}","<"]))]))(e,t)},main:function(e,t){return N(z.expression,E)(e,t)}};var G=/^\s+$/,W=/(^|[^\\])("|\n)/g;function X(e){return Array.isArray(e)&&3===e.length&&"{"===e[0]&&"}"===e[2]?e[1]:e}function J(e){if(!Array.isArray(e)||"{"!==e[0]||"}"!==e[e.length-1])return!1;var t=e[1];if(!Array.isArray(t))return!1;for(var r=!1,n=!1,a=0;a<t.length;a++){var o=t[a];if("?"===o)n=!0;else if(Array.isArray(o))for(var i=0;i<o.length;i++){var u=o[i];"?"===u&&(n=!0),":"===u&&(r=!0)}else"string"==typeof o&&(-1!==o.indexOf("?")&&(n=!0),-1!==o.indexOf(":")&&(r=!0))}return r&&!n}function K(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",r="",n=t,a=0;a<e.length;a++){var o=e[a];if("text"===o.type){var i=Q(o);i.isWhitespace?r+=i.output:(r+=n+i.output,n=",")}else if("fragment"===o.type){var u=K(o.value[1],n);r+=u.output,n=u.separator}else"interpolation"===o.type?(r+=n+"...Moon.view.normalizeChildren("+Q(o.value[1])+")",n=","):(r+=n+Q(o),n=",")}return{output:r,separator:n}}function B(e){var t=Q(e);return-1===o.indexOf(t)?t:"Moon.view.components."+t}function Q(e){var t,r=e.type;if("string"==typeof e)return e;if(Array.isArray(e)){for(var n="",a=0;a<e.length;a++)n+=Q(e[a]);return n}if("comment"===r)return"/*"+Q(e.value[1])+"*/";if("attributes"===r){for(var o=e.value,i=[],u=[],s=0;s<o.length;s++){var l=o[s],f=Q(X(l[0])),c="className"===(t=f)?"class":"htmlFor"===t?"for":"onChange"===t?"oninput":"onDoubleClick"===t?"ondblclick":"dangerouslySetInnerHTML"===t?"innerHTML":t,d=l[1],v=Array.isArray(d)&&"="===d[0]?d[1]:d,p=v&&J(v);if("..."===c.slice(0,3)){var h=c.slice(3)||Q(X(v||[]));i.push(h)}else{var m=null===d?"true":p?"{"+Q(v[1])+"}":Q(X(v));u.push('"'+c+'":'+m)}}if(0===i.length)return{output:u.join(","),separator:0===u.length?"":",",isExpression:!1};var g=0===u.length?"{}":"{"+u.join(",")+"}";return{output:"Object.assign({}, "+i.join(",")+(u.length?", "+g:"")+")",separator:u.length||i.length?",":"",isExpression:!0}}if("text"===r){var b=Q(e.value),x=G.test(b)&&-1!==b.indexOf("\n");return{output:x?b:'Moon.view.components.text({data:"'+b.replace(W,(function(e,t,r){return t+('"'===r?'\\"':"\\n\\\n")}))+'"})',isWhitespace:x}}if("interpolation"===r)return"Moon.view.components.text({data:"+Q(e.value[1])+"})";if("node"===r){var y=e.value;return Q(y[1])+B(y[2])+Q(y[3])}if("nodeData"===r){var C=e.value,w=C[4];if("attributes"===w.type){var k=function(e){if(!e||1!==e.length)return null;var t=e[0],r=t[0],n=t[1],a=Q(r);return null!==n||"{"!==a[0]&&"("!==a[0]&&"["!==a[0]||"{..."===a.slice(0,4)?null:Q(X(r))}(w.value);if(null!==k)return""+Q(C[1])+B(C[2])+Q(C[3])+"("+k+")"}var M=Q(w);return""+Q(C[1])+B(C[2])+Q(C[3])+"("+("attributes"===w.type?M.isExpression?M.output:"{"+M.output+"}":M)+")"}if("nodeDataChildren"===r){var A,T=e.value,E=Q(T[4]),O=T[6],j=O.length>0,D=j?K(O):{output:""};if(E.isExpression)A=j?"Object.assign({}, "+E.output+", {children:["+D.output+"]})":E.output;else{var L=j?(E.separator||"")+"children:["+D.output+"]":"";A="{"+E.output+L+"}"}return""+Q(T[1])+B(T[2])+Q(T[3])+"("+A+")"}return"fragment"===r?"["+K(e.value[1]).output+"]":void 0}function U(e){var t=function(e){return z.main(e,0)}(e);if("ParseError"===t.constructor.name){var r="Invalid Moon view syntax.\n"+function(e,t,r){for(var n=e.length;n<=t;n++)e+=" ";for(var a=e.split("\n"),o=1,i=1,u=0;u<e.length;u++){var s=e[u];if(u===t){var l=o+":"+i;return"Parse error: expected "+r+" at "+o+":"+i+"\n"+l+" "+(a[o-1]||"")+"\n"+" ".repeat(l.length+1+i-1)+"^"}"\n"===s?(o+=1,i=1):i+=1}return"Parse error: expected "+r+" at end of input"}(e,t.index,t.expected)+"\n\nContext:\n"+function(e,t){for(var r=e.length;r<=t;r++)e+=" ";for(var n=e.split("\n"),a=1,o=1,i=0;i<e.length;i++){var s=e[i];if(i===t){var l=a-1,f=a+1,c=Math.max(Math.floor(Math.log10(l)+1),Math.floor(Math.log10(a)+1),Math.floor(Math.log10(f)+1))+2,d=n[l-1],v=n[a-1],p=n[f-1],h="";return void 0!==d&&(h+=u(l+"| ",c)+d+"\n"),h+=u(a+"| ",c)+v+"\n"+u("| ",c)+u("^",o),void 0!==p&&(h+="\n"+u(f+"| ",c)+p),h}"\n"===s?(a+=1,o=1):o+=1}}(e,t.index);throw i(r),new Error(r)}return Q(t[0][0])}var V=[];return document.addEventListener("DOMContentLoaded",(function(){for(var e=document.querySelectorAll("script"),t=0;t<e.length;t++){var r=e[t];"text/moon"===r.type&&V.push(r)}!function e(){if(0!==V.length){var t=V.shift(),r=t.src;if(0===r.length){var n=document.createElement("script");n.type="text/javascript",n.text=U(t.text),t.parentNode.replaceChild(n,t),e()}else{var a=new XMLHttpRequest;a.responseType="text",a.onload=function(){if(0===a.status||200===a.status){var n=document.createElement("script");n.type="text/javascript",n.text=U(a.response),t.parentNode.replaceChild(n,t)}else i("Invalid script HTTP response.\n\nAttempted to download script:\n\t"+r+"\n\nReceived error HTTP status code:\n\t"+a.status+"\n\nExpected OK HTTP status code 0 or 200.");e()},a.onerror=function(){i("Failed script HTTP request.\n\nAttempted to download script:\n\t"+r+"\n\nReceived error.\n\nExpected successful HTTP request."),e()},a.open("GET",r,!0),a.send(null)}}}()})),k}));