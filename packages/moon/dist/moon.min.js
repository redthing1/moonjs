/**
 * Moon v1.0.0-beta.7
 * Copyright 2016-2020 kbrsh
 * Released under the MIT License
 * https://moonjs.org
 */
!function(e,r){"undefined"==typeof module?e.Moon=r():module.exports=r()}(this,(function(){"use strict";function e(e,r){this.name=e,this.data=r}var r=null,n=null;function o(e){r=e}function t(e){n=e}for(var a=["a","abbr","acronym","address","applet","area","article","aside","audio","b","base","basefont","bdi","bdo","bgsound","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","command","content","data","datalist","dd","del","details","dfn","dialog","dir","div","dl","dt","element","em","embed","fieldset","figcaption","figure","font","footer","form","frame","frameset","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","iframe","image","img","input","ins","isindex","kbd","keygen","label","legend","li","link","listing","main","map","mark","marquee","math","menu","menuitem","meta","meter","multicol","nav","nextid","nobr","noembed","noframes","noscript","object","ol","optgroup","option","output","p","param","picture","plaintext","pre","progress","q","rb","rbc","rp","rt","rtc","ruby","s","samp","script","section","select","shadow","slot","small","source","spacer","span","strike","strong","style","sub","summary","sup","svg","table","tbody","td","template","text","textarea","tfoot","th","thead","time","title","tr","track","tt","u","ul","var","video","wbr","xmp"],i={node:function(r){return function(n){return new e(r,n)}}},s=function(){var r=a[u];i[r]=function(n){return new e(r,n)}},u=0;u<a.length;u++)s();var f={};function l(e,r){throw new Error(r)}function c(e,r){if(y(e,r&&r.nodeName?r.nodeName.toLowerCase():"node"),e)if("function"==typeof e)e(r);else{if("object"!=typeof e)throw new Error("[Moon] Unsupported ref type; refs must be functions or ref objects.");e.current=r}}function d(e){if(!e||"object"!=typeof e)return e;for(var r=Object.keys(e),n=0;n<r.length;n++){var o=r[n];if(null!=o&&-1!==o.indexOf("-")){for(var t=o.split("-"),a=t[0],i=1;i<t.length;i++){var s=t[i];s.length>0&&(a+=s[0].toUpperCase()+s.slice(1))}a in e||(e[a]=e[o]),delete e[o]}}return e}function m(e,r){return!(!e||"object"!=typeof e)&&("key"!==r&&"ref"!==r&&("attributes"!==r&&"style"!==r&&"innerHTML"!==r&&"focus"!==r&&"class"!==r&&"for"!==r&&"children"!==r&&(("o"!==r[0]||"n"!==r[1])&&(0!==r.indexOf("data-")&&0!==r.indexOf("aria-")&&!(r in e)))))}function v(e){switch(e){case"onChange":return"oninput";case"onDoubleClick":return"ondblclick";case"onFocus":return"onfocus";case"onBlur":return"onblur";case"onSubmit":return"onsubmit";case"onMouseEnter":return"onmouseenter";case"onMouseLeave":return"onmouseleave";case"onMouseOver":return"onmouseover";case"onMouseOut":return"onmouseout";case"onKeyDown":return"onkeydown";case"onKeyUp":return"onkeyup";case"onKeyPress":return"onkeypress";case"onInput":return"oninput";default:return e.toLowerCase()}}function b(e,r){var n=null===e?"null":Array.isArray(e)?"array":typeof e;if(!e||"object"!=typeof e||Array.isArray(e))throw new Error("[Moon] Style on <"+r+"> must be a plain object, received "+n+".")}function p(e,r,n){if("function"!=typeof e)throw new Error("[Moon] Event handler "+r+" on <"+n+"> must be a function.")}function h(e,r){if(void 0!==e){var n=typeof e;if(null===e||"string"!==n&&"number"!==n||""===e)throw new Error("[Moon] Key on <"+r+"> must be a string or number, received "+(null===e?"null":n)+".")}}function y(e,r){if(void 0!==e&&"function"!=typeof e&&(!e||"object"!=typeof e))throw new Error("[Moon] Ref on <"+r+"> must be a function or ref object.")}function g(e,r){if(!Array.isArray(e))throw new Error("[Moon] Children on <"+r+"> must be an array.");for(var n=0;n<e.length;n++){var o=e[n];if(!o||"object"!=typeof o||!o.name)throw new Error("[Moon] Child "+n+" of <"+r+"> is not a valid view node.")}}function w(e,r,n){if(!e||"object"!=typeof e||Array.isArray(e)){var o=null===e?"null":Array.isArray(e)?"array":typeof e;throw new Error("[Moon] "+n+" on <"+r+"> must be a plain object, received "+o+".")}}function k(e,r,n){if("boolean"!=typeof e)throw new Error("[Moon] "+n+" on <"+r+"> must be a boolean.")}function M(e,r,n){if("string"==typeof e||"number"==typeof e)return e;throw new Error("[Moon] "+n+" on <"+r+"> must be a string or number.")}function C(e,r,n){var o=typeof e;if(("number"!==o||!Number.isFinite(e))&&"string"!==o)throw new Error('[Moon] Style "'+n+'" on <'+r+"> must be a finite number or string, received "+o+".")}function E(e,r){if("string"!=typeof e||0===e.length||"null"===e||"undefined"===e)throw new Error("[Moon] Style key on <"+r+"> must be a non-empty string.")}function A(e,r){for(var n in e){if(""===n||null==n||"string"!=typeof n)throw new Error("[Moon] Attribute key on <"+r+"> must be a non-empty string.");var o=e[n],t=typeof o;if(null==o)throw new Error('[Moon] Attribute "'+n+'" on <'+r+"> must not be null/undefined.");if("number"===t&&!Number.isFinite(o))throw new Error('[Moon] Attribute "'+n+'" on <'+r+"> must be a finite number, received "+o+".");if("string"!==t&&"number"!==t&&"boolean"!==t)throw new Error('[Moon] Attribute "'+n+'" on <'+r+"> must be a string, number, or boolean, received "+t+".")}}function j(e,r){if(!e||"object"!=typeof e)throw new Error("[Moon] Props on <"+r+"> must be an object.");for(var n in e){var o=e[n];if(void 0===o)throw new Error('[Moon] Prop "'+n+'" on <'+r+"> is undefined; pass null to intentionally clear.");if("o"===n[0]&&"n"===n[1]&&p(o,n,r),"children"===n&&g(o,r),"attributes"===n&&(w(o,r,"Attributes"),A(o,r)),"style"===n)for(var t in b(o,r),d(o),o)E(t,r),C(o[t],r,t);if("ref"===n&&y(o,r),"key"===n&&h(o,r),"class"!==n&&"for"!==n||M(o,r,n),"focus"===n&&k(o,r,"focus"),"innerHTML"===n&&"string"!=typeof o)throw new Error("[Moon] innerHTML on <"+r+"> must be a string.")}}function x(e){if(!Array.isArray(e)||0===e.length)return"";for(var r="",n=0;n<e.length;n++){var o=e[n];r+=""+(o&&o.name?o.name:"unknown")+(o&&o.data&&void 0!==o.data.key?"#keyed":"#unkeyed")+";"}return r}function O(e,r){var n=e&&e.data?e.data.key:void 0,o=r&&r.data?r.data.key:void 0;if(void 0!==n&&void 0!==o&&n===o){var t=e.data&&e.data.children,a=r.data&&r.data.children;if(t&&a)if(x(t)!==x(a))throw new Error('[Moon] Key "'+o+'" on <'+r.name+"> was reused but its child shape changed; change the key when swapping layouts to avoid DOM corruption.")}}function S(e){var r=e.name;if("text"===r)return document.createTextNode(e.data.data);var n=document.createElement(r);n.MoonChildren=n.MoonChildren||[];var o=e.data;for(var t in j(o,r),o){var a=o[t];if("o"===t[0]&&"n"===t[1])p(a,t,r),n[v(t)]=a;else switch(t){case"attributes":for(var i in w(a,r,"Attributes"),A(a,r),a)n.setAttribute(i,a[i]);break;case"style":b(a,r);var s=n.style;for(var u in d(a),a)E(u,r),C(a[u],r,u),s[u]=a[u];break;case"innerHTML":if("string"!=typeof a)throw new Error("[Moon] innerHTML on <"+r+"> must be a string.");n.innerHTML=a;break;case"focus":k(a,r,"focus"),!0===a&&n.focus();break;case"class":n.className=M(a,r,"class");break;case"for":n.htmlFor=M(a,r,"for");break;case"ref":c(a,n);break;case"children":g(a,r);for(var f=n.MoonChildren=[],h=0;h<a.length;h++){var y=S(a[h]);f.push(y),n.appendChild(y)}break;default:m(n,t)&&l(0,'[Moon] Unknown DOM prop "'+t+'" on <'+r+">; it will be set as a property."),n[t]=a}}return n}Node.prototype.MoonChildren=null;var L={set:function(e){if(r.name===e.name)!function e(r,n,o){var t=r.data,a=o.data;for(var i in j(a,r.name),a){var s=t[i],u=a[i];if(s!==u)if("o"===i[0]&&"n"===i[1])p(u,i,r.name),n[v(i)]=u;else switch(i){case"attributes":if(w(u,r.name,"Attributes"),A(u,r.name),void 0===s)for(var x in u)n.setAttribute(x,u[x]);else{for(var L in u){var T=u[L];s[L]!==T&&n.setAttribute(L,T)}for(var N in s)N in u||n.removeAttribute(N)}break;case"style":var D=n.style;if(b(u,r.name),d(u),s&&d(s),void 0===s)for(var H in u)E(H,r.name),C(u[H],r.name,H),D[H]=u[H];else{for(var P in u){var q=u[P];E(P,r.name),C(q,r.name,P),s[P]!==q&&(D[P]=q)}for(var F in s)F in u||(D[F]="")}break;case"focus":k(u,r.name,"focus"),u?n.focus():n.blur();break;case"class":n.className=M(u,r.name,"class");break;case"for":n.htmlFor=M(u,r.name,"for");break;case"ref":y(u,r.name),c(u,n);break;case"children":var K=n.MoonChildren||[],U=u.length;g(u,r.name),void 0!==s&&g(s,r.name);for(var R=0;R<U;R++){var B=u[R];h(B&&B.data&&B.data.key,B&&B.name?B.name:"node"),y(B&&B.data&&B.data.ref,B&&B.name?B.name:"node")}void 0!==s&&O(r,o);for(var z=[],G=!0,I=!1,X=Object.create(null),$=!1,J=0;J<U;J++){var Q=u[J].data&&u[J].data.key;h(Q,u[J].name),void 0===Q?G=!1:(I=!0,X[Q]?$=!0:X[Q]=!0),z.push(Q)}if(I&&!G&&l(0,"[Moon] Some children have a key and some do not; keyed children must be consistently keyed."),$&&l(0,"[Moon] Duplicate keys detected among siblings; keys must be unique."),void 0===s){n.firstChild&&(n.textContent=""),K.length=0;for(var V=0;V<U;V++){var W=S(u[V]);K.push(W),n.appendChild(W)}n.MoonChildren=K}else if(G){for(var Y={},Z=0;Z<s.length;Z++){var _=s[Z].data&&s[Z].data.key;if(h(_,s[Z].name),void 0!==_){if(Y[_])throw new Error("[Moon] Duplicate keys detected among existing siblings under <"+r.name+">; keys must be unique.");Y[_]={node:s[Z],el:K[Z],used:!1}}}for(var ee=[],re=0;re<U;re++){var ne=u[re],oe=Y[z[re]];if(oe)e(oe.node,oe.el,ne),oe.used=!0,ee.push(oe.el);else{var te=S(ne);ee.push(te)}}for(var ae in Y)Y[ae].used||n.removeChild(Y[ae].el);for(var ie=n.firstChild,se=0;se<U;se++){var ue=ee[se];ie===ue?ie=ie.nextSibling:(n.insertBefore(ue,ie),ie=ue.nextSibling)}for(;ie;){var fe=ie.nextSibling;n.removeChild(ie),ie=fe}n.MoonChildren=ee}else{var le=s.length;if(le===U)for(var ce=0;ce<le;ce++){var de=s[ce],me=u[ce];if(de!==me)if(de.name===me.name)e(de,K[ce],me);else{var ve=S(me);n.replaceChild(ve,K[ce]),K[ce]=ve}}else if(le>U){for(var be=0;be<U;be++){var pe=s[be],he=u[be];if(pe!==he)if(pe.name===he.name)e(pe,K[be],he);else{var ye=S(he);n.replaceChild(ye,K[be]),K[be]=ye}}for(var ge=U;ge<le;ge++)n.removeChild(K.pop())}else{for(var we=0;we<le;we++){var ke=s[we],Me=u[we];if(ke!==Me)if(ke.name===Me.name)e(ke,K[we],Me);else{var Ce=S(Me);n.replaceChild(Ce,K[we]),K[we]=Ce}}for(var Ee=le;Ee<U;Ee++){var Ae=S(u[Ee]);K.push(Ae),n.appendChild(Ae)}}}break;default:m(n,i)&&l(0,'[Moon] Unknown DOM prop "'+i+'" on <'+r.name+">; use a valid DOM prop or data-/aria-."),n[i]=u}}for(var je in t)if(!(je in a))if("o"===je[0]&&"n"===je[1])n[je.toLowerCase()]=null;else switch(je){case"attributes":var xe=t.attributes;for(var Oe in xe)n.removeAttribute(Oe);break;case"focus":n.blur();break;case"class":n.className="";break;case"for":n.htmlFor="";break;case"children":for(var Se=t.children.length,Le=n.MoonChildren||[],Te=0;Te<Se;Te++)n.removeChild(Le.pop());break;case"ref":c(t.ref,null);break;default:var Ne=r.name;n[je]=(Ne in f?f[Ne]:f[Ne]="text"===Ne?document.createTextNode(""):document.createElement(Ne))[je]}}(r,n,e);else{var a=S(e);n.parentNode.replaceChild(a,n),t(a)}o(e)}},T={components:i,mount:function(r){t(r);for(var a=n.attributes,i={},s=0;s<a.length;s++){var u=a[s];i[u.name]=u.value}o(new e(n.tagName.toLowerCase(),i))},normalizeChildren:function e(r){if(null==r||"boolean"==typeof r)return[];if(Array.isArray(r)){for(var n=[],o=0;o<r.length;o++)for(var t=e(r[o]),a=0;a<t.length;a++)n.push(t[a]);return n}var s=typeof r;return"string"===s||"number"===s||"bigint"===s?[i.text({data:String(r)})]:r&&void 0!==r.name?[r]:[i.text({data:String(r)})]},cls:function e(){for(var r="",n=0;n<arguments.length;n++){var o=arguments[n];if(o){var t=typeof o;if("string"===t||"number"===t)r+=(r?" ":"")+o;else if(Array.isArray(o)){var a=e.apply(null,o);a&&(r+=(r?" ":"")+a)}else if("object"===t)for(var i in o)o[i]&&(r+=(r?" ":"")+i)}}return r},mergeProps:function(){for(var e={},r=0;r<arguments.length;r++){var n=arguments[r];if(n&&"object"==typeof n)for(var o in n)e[o]=n[o]}return e}};var N={router:function(e){for(var r=e.route,n="/",o=e.routes,t=1;t<r.length;t++){var a=r[t];"/"===a?(o=(n in o?o[n]:o["/*"])[1],n="/"):n+=a}return(n in o?o[n]:o["/*"])[0](e)}},D={get:function(){return Date.now()},set:function(e){setTimeout(e[1],1e3*e[0])}},H={get:function(){return localStorage},set:function(e){for(var r in e){var n=e[r];localStorage[r]!==n&&(localStorage[r]=n)}for(var o in localStorage)o in e||delete localStorage[o]}},P=/^([^:]+):\s*([^]*?)\s*$/gm,q={set:function(e){var r=new XMLHttpRequest;if(r.responseType="responseType"in e?e.responseType:"text","onLoad"in e&&(r.onload=function(){for(var n,o={},t=r.getAllResponseHeaders();null!==(n=P.exec(t));)o[n[1]]=n[2];e.onLoad({status:r.status,headers:o,body:r.response})}),"onError"in e&&(r.onerror=e.onError),r.open("method"in e?e.method:"GET",e.url),"headers"in e){var n=e.headers;for(var o in n)r.setRequestHeader(o,n[o])}r.send("body"in e?e.body:null)}},F={get:function(){return location.pathname},set:function(e){history.pushState(null,"",e)}},K={data:{}};return Object.defineProperty(K,"view",L),Object.defineProperty(K,"time",D),Object.defineProperty(K,"storage",H),Object.defineProperty(K,"http",q),Object.defineProperty(K,"route",F),{m:K,route:N,version:"1.0.0-beta.7",view:T}}));