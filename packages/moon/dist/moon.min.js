/**
 * Moon v1.0.0-beta.7
 * Copyright 2016-2020 kbrsh
 * Released under the MIT License
 * https://moonjs.org
 */
!function(e,r){"undefined"==typeof module?e.Moon=r():module.exports=r()}(this,(function(){"use strict";function e(e,r){this.name=e,this.data=r}var r=null,n=null;function t(e){r=e}function o(e){n=e}for(var a=["a","abbr","acronym","address","applet","area","article","aside","audio","b","base","basefont","bdi","bdo","bgsound","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","command","content","data","datalist","dd","del","details","dfn","dialog","dir","div","dl","dt","element","em","embed","fieldset","figcaption","figure","font","footer","form","frame","frameset","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","iframe","image","img","input","ins","isindex","kbd","keygen","label","legend","li","link","listing","main","map","mark","marquee","math","menu","menuitem","meta","meter","multicol","nav","nextid","nobr","noembed","noframes","noscript","object","ol","optgroup","option","output","p","param","picture","plaintext","pre","progress","q","rb","rbc","rp","rt","rtc","ruby","s","samp","script","section","select","shadow","slot","small","source","spacer","span","strike","strong","style","sub","summary","sup","svg","table","tbody","td","template","text","textarea","tfoot","th","thead","time","title","tr","track","tt","u","ul","var","video","wbr","xmp"],i={node:function(r){return function(n){return new e(r,n)}}},s=function(){var r=a[u];i[r]=function(n){return new e(r,n)}},u=0;u<a.length;u++)s();var l={};function f(e,r){throw new Error(r)}function d(e,r){if(y(e,r&&r.nodeName?r.nodeName.toLowerCase():"node"),e)if("function"==typeof e)e(r);else{if("object"!=typeof e)throw new Error("[Moon] Unsupported ref type; refs must be functions or ref objects.");e.current=r}}function c(e){if(!e||"object"!=typeof e)return e;for(var r=Object.keys(e),n=0;n<r.length;n++){var t=r[n];if(null!=t&&-1!==t.indexOf("-")){for(var o=t.split("-"),a=o[0],i=1;i<o.length;i++){var s=o[i];s.length>0&&(a+=s[0].toUpperCase()+s.slice(1))}a in e||(e[a]=e[t]),delete e[t]}}return e}function v(e,r){return!(!e||"object"!=typeof e)&&("key"!==r&&"ref"!==r&&("attributes"!==r&&"style"!==r&&"innerHTML"!==r&&"focus"!==r&&"class"!==r&&"for"!==r&&"children"!==r&&(("o"!==r[0]||"n"!==r[1])&&(0!==r.indexOf("data-")&&0!==r.indexOf("aria-")&&!(r in e)))))}function m(e){switch(e){case"onChange":return"oninput";case"onDoubleClick":return"ondblclick";case"onFocus":return"onfocus";case"onBlur":return"onblur";case"onSubmit":return"onsubmit";case"onMouseEnter":return"onmouseenter";case"onMouseLeave":return"onmouseleave";case"onMouseOver":return"onmouseover";case"onMouseOut":return"onmouseout";case"onKeyDown":return"onkeydown";case"onKeyUp":return"onkeyup";case"onKeyPress":return"onkeypress";case"onInput":return"oninput";default:return e.toLowerCase()}}function p(e,r){var n=null===e?"null":Array.isArray(e)?"array":typeof e;if(!e||"object"!=typeof e||Array.isArray(e))throw new Error("[Moon] Style on <"+r+"> must be a plain object, received "+n+".")}function b(e,r,n){if("function"!=typeof e)throw new Error("[Moon] Event handler "+r+" on <"+n+"> must be a function.")}function h(e,r){if(void 0!==e){var n=typeof e;if(null===e||"string"!==n&&"number"!==n||""===e)throw new Error("[Moon] Key on <"+r+"> must be a string or number, received "+(null===e?"null":n)+".")}}function y(e,r){if(void 0!==e&&"function"!=typeof e&&(!e||"object"!=typeof e))throw new Error("[Moon] Ref on <"+r+"> must be a function or ref object.")}function g(e,r){if(!Array.isArray(e))throw new Error("[Moon] Children on <"+r+"> must be an array.");for(var n=0;n<e.length;n++){var t=e[n];if(!t||"object"!=typeof t||!t.name)throw new Error("[Moon] Child "+n+" of <"+r+"> is not a valid view node.")}}function k(e){if(!Array.isArray(e)||0===e.length)return"";for(var r="",n=0;n<e.length;n++){var t=e[n];r+=""+(t&&t.name?t.name:"unknown")+(t&&t.data&&void 0!==t.data.key?"#keyed":"#unkeyed")+";"}return r}function w(e,r){var n=e&&e.data?e.data.key:void 0,t=r&&r.data?r.data.key:void 0;if(void 0!==n&&void 0!==t&&n===t){var o=e.data&&e.data.children,a=r.data&&r.data.children;if(o&&a)if(k(o)!==k(a))throw new Error('[Moon] Key "'+t+'" on <'+r.name+"> was reused but its child shape changed; change the key when swapping layouts to avoid DOM corruption.")}}function M(e){var r=e.name;if("text"===r)return document.createTextNode(e.data.data);var n=document.createElement(r);n.MoonChildren=n.MoonChildren||[];var t=e.data;for(var o in t){var a=t[o];if("o"===o[0]&&"n"===o[1])b(a,o,r),n[m(o)]=a;else switch(o){case"attributes":for(var i in a)n.setAttribute(i,a[i]);break;case"style":p(a,r);var s=n.style;for(var u in c(a),a)s[u]=a[u];break;case"innerHTML":n.innerHTML=a;break;case"focus":a&&n.focus();break;case"class":n.className=a;break;case"for":n.htmlFor=a;break;case"ref":d(a,n);break;case"children":g(a,r);for(var l=n.MoonChildren=[],h=0;h<a.length;h++){var y=M(a[h]);l.push(y),n.appendChild(y)}break;default:v(n,o)&&f(0,'[Moon] Unknown DOM prop "'+o+'" on <'+r+">; it will be set as a property."),n[o]=a}}return n}Node.prototype.MoonChildren=null;var C={set:function(e){if(r.name===e.name)!function e(r,n,t){var o=r.data,a=t.data;for(var i in a){var s=o[i],u=a[i];if(s!==u)if("o"===i[0]&&"n"===i[1])b(u,i,r.name),n[m(i)]=u;else switch(i){case"attributes":if(void 0===s)for(var k in u)n.setAttribute(k,u[k]);else{for(var C in u){var x=u[C];s[C]!==x&&n.setAttribute(C,x)}for(var j in s)j in u||n.removeAttribute(j)}break;case"style":var A=n.style;if(p(u,r.name),c(u),s&&c(s),void 0===s)for(var E in u)A[E]=u[E];else{for(var O in u){var S=u[O];s[O]!==S&&(A[O]=S)}for(var L in s)L in u||(A[L]="")}break;case"focus":u?n.focus():n.blur();break;case"class":n.className=u;break;case"for":n.htmlFor=u;break;case"ref":y(u,r.name),d(u,n);break;case"children":var N=n.MoonChildren||[],T=u.length;g(u,r.name),void 0!==s&&g(s,r.name);for(var D=0;D<T;D++){var q=u[D];h(q&&q.data&&q.data.key,q&&q.name?q.name:"node"),y(q&&q.data&&q.data.ref,q&&q.name?q.name:"node")}void 0!==s&&w(r,t);for(var P=[],H=!0,K=!1,U=Object.create(null),F=!1,R=0;R<T;R++){var B=u[R].data&&u[R].data.key;h(B,u[R].name),void 0===B?H=!1:(K=!0,U[B]?F=!0:U[B]=!0),P.push(B)}if(K&&!H&&f(0,"[Moon] Some children have a key and some do not; keyed children must be consistently keyed."),F&&f(0,"[Moon] Duplicate keys detected among siblings; keys must be unique."),void 0===s){for(var z=0;z<T;z++){var G=M(u[z]);N.push(G),n.appendChild(G)}n.MoonChildren=N}else if(H){for(var I={},X=0;X<s.length;X++){var $=s[X].data&&s[X].data.key;if(h($,s[X].name),void 0!==$){if(I[$])throw new Error("[Moon] Duplicate keys detected among existing siblings under <"+r.name+">; keys must be unique.");I[$]={node:s[X],el:N[X],used:!1}}}for(var J=[],Q=0;Q<T;Q++){var V=u[Q],W=I[P[Q]];if(W)e(W.node,W.el,V),W.used=!0,J.push(W.el);else{var Y=M(V);J.push(Y)}}for(var Z in I)I[Z].used||n.removeChild(I[Z].el);for(var _=n.firstChild,ee=0;ee<T;ee++){var re=J[ee];_===re?_=_.nextSibling:(n.insertBefore(re,_),_=re.nextSibling)}for(;_;){var ne=_.nextSibling;n.removeChild(_),_=ne}n.MoonChildren=J}else{var te=s.length;if(te===T)for(var oe=0;oe<te;oe++){var ae=s[oe],ie=u[oe];if(ae!==ie)if(ae.name===ie.name)e(ae,N[oe],ie);else{var se=M(ie);n.replaceChild(se,N[oe]),N[oe]=se}}else if(te>T){for(var ue=0;ue<T;ue++){var le=s[ue],fe=u[ue];if(le!==fe)if(le.name===fe.name)e(le,N[ue],fe);else{var de=M(fe);n.replaceChild(de,N[ue]),N[ue]=de}}for(var ce=T;ce<te;ce++)n.removeChild(N.pop())}else{for(var ve=0;ve<te;ve++){var me=s[ve],pe=u[ve];if(me!==pe)if(me.name===pe.name)e(me,N[ve],pe);else{var be=M(pe);n.replaceChild(be,N[ve]),N[ve]=be}}for(var he=te;he<T;he++){var ye=M(u[he]);N.push(ye),n.appendChild(ye)}}}break;default:v(n,i)&&f(0,'[Moon] Unknown DOM prop "'+i+'" on <'+r.name+">; use a valid DOM prop or data-/aria-."),n[i]=u}}for(var ge in o)if(!(ge in a))if("o"===ge[0]&&"n"===ge[1])n[ge.toLowerCase()]=null;else switch(ge){case"attributes":var ke=o.attributes;for(var we in ke)n.removeAttribute(we);break;case"focus":n.blur();break;case"class":n.className="";break;case"for":n.htmlFor="";break;case"children":for(var Me=o.children.length,Ce=n.MoonChildren||[],xe=0;xe<Me;xe++)n.removeChild(Ce.pop());break;case"ref":d(o.ref,null);break;default:var je=r.name;n[ge]=(je in l?l[je]:l[je]="text"===je?document.createTextNode(""):document.createElement(je))[ge]}}(r,n,e);else{var a=M(e);n.parentNode.replaceChild(a,n),o(a)}t(e)}},x={components:i,mount:function(r){o(r);for(var a=n.attributes,i={},s=0;s<a.length;s++){var u=a[s];i[u.name]=u.value}t(new e(n.tagName.toLowerCase(),i))},normalizeChildren:function e(r){if(null==r||"boolean"==typeof r)return[];if(Array.isArray(r)){for(var n=[],t=0;t<r.length;t++)for(var o=e(r[t]),a=0;a<o.length;a++)n.push(o[a]);return n}var s=typeof r;return"string"===s||"number"===s||"bigint"===s?[i.text({data:String(r)})]:r&&void 0!==r.name?[r]:[i.text({data:String(r)})]},cls:function e(){for(var r="",n=0;n<arguments.length;n++){var t=arguments[n];if(t){var o=typeof t;if("string"===o||"number"===o)r+=(r?" ":"")+t;else if(Array.isArray(t)){var a=e.apply(null,t);a&&(r+=(r?" ":"")+a)}else if("object"===o)for(var i in t)t[i]&&(r+=(r?" ":"")+i)}}return r},mergeProps:function(){for(var e={},r=0;r<arguments.length;r++){var n=arguments[r];if(n&&"object"==typeof n)for(var t in n)e[t]=n[t]}return e}};var j={router:function(e){for(var r=e.route,n="/",t=e.routes,o=1;o<r.length;o++){var a=r[o];"/"===a?(t=(n in t?t[n]:t["/*"])[1],n="/"):n+=a}return(n in t?t[n]:t["/*"])[0](e)}},A={get:function(){return Date.now()},set:function(e){setTimeout(e[1],1e3*e[0])}},E={get:function(){return localStorage},set:function(e){for(var r in e){var n=e[r];localStorage[r]!==n&&(localStorage[r]=n)}for(var t in localStorage)t in e||delete localStorage[t]}},O=/^([^:]+):\s*([^]*?)\s*$/gm,S={set:function(e){var r=new XMLHttpRequest;if(r.responseType="responseType"in e?e.responseType:"text","onLoad"in e&&(r.onload=function(){for(var n,t={},o=r.getAllResponseHeaders();null!==(n=O.exec(o));)t[n[1]]=n[2];e.onLoad({status:r.status,headers:t,body:r.response})}),"onError"in e&&(r.onerror=e.onError),r.open("method"in e?e.method:"GET",e.url),"headers"in e){var n=e.headers;for(var t in n)r.setRequestHeader(t,n[t])}r.send("body"in e?e.body:null)}},L={get:function(){return location.pathname},set:function(e){history.pushState(null,"",e)}},N={data:{}};return Object.defineProperty(N,"view",C),Object.defineProperty(N,"time",A),Object.defineProperty(N,"storage",E),Object.defineProperty(N,"http",S),Object.defineProperty(N,"route",L),{m:N,route:j,version:"1.0.0-beta.7",view:x}}));